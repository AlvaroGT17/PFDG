<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.3" />
    <title>controladores.clientes_controlador API documentation</title>

    <style>
        /*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */
        *,
        ::after,
        ::before {
            box-sizing: border-box
        }

        @media (prefers-reduced-motion:no-preference) {
            :root {
                scroll-behavior: smooth
            }
        }

        body {
            margin: 0;
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #212529;
            background-color: #fff;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent
        }

        hr {
            margin: 1rem 0;
            color: inherit;
            background-color: currentColor;
            border: 0;
            opacity: .25
        }

        hr:not([size]) {
            height: 1px
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            margin-top: 0;
            margin-bottom: .5rem;
            font-weight: 500;
            line-height: 1.2
        }

        h1 {
            font-size: calc(1.375rem + 1.5vw)
        }

        @media (min-width:1200px) {
            h1 {
                font-size: 2.5rem
            }
        }

        h2 {
            font-size: calc(1.325rem + .9vw)
        }

        @media (min-width:1200px) {
            h2 {
                font-size: 2rem
            }
        }

        h3 {
            font-size: calc(1.3rem + .6vw)
        }

        @media (min-width:1200px) {
            h3 {
                font-size: 1.75rem
            }
        }

        h4 {
            font-size: calc(1.275rem + .3vw)
        }

        @media (min-width:1200px) {
            h4 {
                font-size: 1.5rem
            }
        }

        h5 {
            font-size: 1.25rem
        }

        h6 {
            font-size: 1rem
        }

        p {
            margin-top: 0;
            margin-bottom: 1rem
        }

        abbr[data-bs-original-title],
        abbr[title] {
            -webkit-text-decoration: underline dotted;
            text-decoration: underline dotted;
            cursor: help;
            -webkit-text-decoration-skip-ink: none;
            text-decoration-skip-ink: none
        }

        address {
            margin-bottom: 1rem;
            font-style: normal;
            line-height: inherit
        }

        ol,
        ul {
            padding-left: 2rem
        }

        dl,
        ol,
        ul {
            margin-top: 0;
            margin-bottom: 1rem
        }

        ol ol,
        ol ul,
        ul ol,
        ul ul {
            margin-bottom: 0
        }

        dt {
            font-weight: 700
        }

        dd {
            margin-bottom: .5rem;
            margin-left: 0
        }

        blockquote {
            margin: 0 0 1rem
        }

        b,
        strong {
            font-weight: bolder
        }

        small {
            font-size: .875em
        }

        mark {
            padding: .2em;
            background-color: #fcf8e3
        }

        sub,
        sup {
            position: relative;
            font-size: .75em;
            line-height: 0;
            vertical-align: baseline
        }

        sub {
            bottom: -.25em
        }

        sup {
            top: -.5em
        }

        a {
            color: #0d6efd;
            text-decoration: underline
        }

        a:hover {
            color: #0a58ca
        }

        a:not([href]):not([class]),
        a:not([href]):not([class]):hover {
            color: inherit;
            text-decoration: none
        }

        code,
        kbd,
        pre,
        samp {
            font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 1em;
            direction: ltr;
            unicode-bidi: bidi-override
        }

        pre {
            display: block;
            margin-top: 0;
            margin-bottom: 1rem;
            overflow: auto;
            font-size: .875em
        }

        pre code {
            font-size: inherit;
            color: inherit;
            word-break: normal
        }

        code {
            font-size: .875em;
            color: #d63384;
            word-wrap: break-word
        }

        a>code {
            color: inherit
        }

        kbd {
            padding: .2rem .4rem;
            font-size: .875em;
            color: #fff;
            background-color: #212529;
            border-radius: .2rem
        }

        kbd kbd {
            padding: 0;
            font-size: 1em;
            font-weight: 700
        }

        figure {
            margin: 0 0 1rem
        }

        img,
        svg {
            vertical-align: middle
        }

        table {
            caption-side: bottom;
            border-collapse: collapse
        }

        caption {
            padding-top: .5rem;
            padding-bottom: .5rem;
            color: #6c757d;
            text-align: left
        }

        th {
            text-align: inherit;
            text-align: -webkit-match-parent
        }

        tbody,
        td,
        tfoot,
        th,
        thead,
        tr {
            border-color: inherit;
            border-style: solid;
            border-width: 0
        }

        label {
            display: inline-block
        }

        button {
            border-radius: 0
        }

        button:focus:not(:focus-visible) {
            outline: 0
        }

        button,
        input,
        optgroup,
        select,
        textarea {
            margin: 0;
            font-family: inherit;
            font-size: inherit;
            line-height: inherit
        }

        button,
        select {
            text-transform: none
        }

        [role=button] {
            cursor: pointer
        }

        select {
            word-wrap: normal
        }

        select:disabled {
            opacity: 1
        }

        [list]::-webkit-calendar-picker-indicator {
            display: none
        }

        [type=button],
        [type=reset],
        [type=submit],
        button {
            -webkit-appearance: button
        }

        [type=button]:not(:disabled),
        [type=reset]:not(:disabled),
        [type=submit]:not(:disabled),
        button:not(:disabled) {
            cursor: pointer
        }

        ::-moz-focus-inner {
            padding: 0;
            border-style: none
        }

        textarea {
            resize: vertical
        }

        fieldset {
            min-width: 0;
            padding: 0;
            margin: 0;
            border: 0
        }

        legend {
            float: left;
            width: 100%;
            padding: 0;
            margin-bottom: .5rem;
            font-size: calc(1.275rem + .3vw);
            line-height: inherit
        }

        @media (min-width:1200px) {
            legend {
                font-size: 1.5rem
            }
        }

        legend+* {
            clear: left
        }

        ::-webkit-datetime-edit-day-field,
        ::-webkit-datetime-edit-fields-wrapper,
        ::-webkit-datetime-edit-hour-field,
        ::-webkit-datetime-edit-minute,
        ::-webkit-datetime-edit-month-field,
        ::-webkit-datetime-edit-text,
        ::-webkit-datetime-edit-year-field {
            padding: 0
        }

        ::-webkit-inner-spin-button {
            height: auto
        }

        [type=search] {
            outline-offset: -2px;
            -webkit-appearance: textfield
        }

        ::-webkit-search-decoration {
            -webkit-appearance: none
        }

        ::-webkit-color-swatch-wrapper {
            padding: 0
        }

        ::file-selector-button {
            font: inherit
        }

        ::-webkit-file-upload-button {
            font: inherit;
            -webkit-appearance: button
        }

        output {
            display: inline-block
        }

        iframe {
            border: 0
        }

        summary {
            display: list-item;
            cursor: pointer
        }

        progress {
            vertical-align: baseline
        }

        [hidden] {
            display: none !important
        }
    </style>
    <style>
        /*! syntax-highlighting.css */
        pre {
            line-height: 125%;
        }

        span.linenos {
            color: inherit;
            background-color: transparent;
            padding-left: 5px;
            padding-right: 20px;
        }

        .pdoc-code .hll {
            background-color: #ffffcc
        }

        .pdoc-code {
            background: #f8f8f8;
        }

        .pdoc-code .c {
            color: #3D7B7B;
            font-style: italic
        }

        .pdoc-code .err {
            border: 1px solid #FF0000
        }

        .pdoc-code .k {
            color: #008000;
            font-weight: bold
        }

        .pdoc-code .o {
            color: #666666
        }

        .pdoc-code .ch {
            color: #3D7B7B;
            font-style: italic
        }

        .pdoc-code .cm {
            color: #3D7B7B;
            font-style: italic
        }

        .pdoc-code .cp {
            color: #9C6500
        }

        .pdoc-code .cpf {
            color: #3D7B7B;
            font-style: italic
        }

        .pdoc-code .c1 {
            color: #3D7B7B;
            font-style: italic
        }

        .pdoc-code .cs {
            color: #3D7B7B;
            font-style: italic
        }

        .pdoc-code .gd {
            color: #A00000
        }

        .pdoc-code .ge {
            font-style: italic
        }

        .pdoc-code .gr {
            color: #E40000
        }

        .pdoc-code .gh {
            color: #000080;
            font-weight: bold
        }

        .pdoc-code .gi {
            color: #008400
        }

        .pdoc-code .go {
            color: #717171
        }

        .pdoc-code .gp {
            color: #000080;
            font-weight: bold
        }

        .pdoc-code .gs {
            font-weight: bold
        }

        .pdoc-code .gu {
            color: #800080;
            font-weight: bold
        }

        .pdoc-code .gt {
            color: #0044DD
        }

        .pdoc-code .kc {
            color: #008000;
            font-weight: bold
        }

        .pdoc-code .kd {
            color: #008000;
            font-weight: bold
        }

        .pdoc-code .kn {
            color: #008000;
            font-weight: bold
        }

        .pdoc-code .kp {
            color: #008000
        }

        .pdoc-code .kr {
            color: #008000;
            font-weight: bold
        }

        .pdoc-code .kt {
            color: #B00040
        }

        .pdoc-code .m {
            color: #666666
        }

        .pdoc-code .s {
            color: #BA2121
        }

        .pdoc-code .na {
            color: #687822
        }

        .pdoc-code .nb {
            color: #008000
        }

        .pdoc-code .nc {
            color: #0000FF;
            font-weight: bold
        }

        .pdoc-code .no {
            color: #880000
        }

        .pdoc-code .nd {
            color: #AA22FF
        }

        .pdoc-code .ni {
            color: #717171;
            font-weight: bold
        }

        .pdoc-code .ne {
            color: #CB3F38;
            font-weight: bold
        }

        .pdoc-code .nf {
            color: #0000FF
        }

        .pdoc-code .nl {
            color: #767600
        }

        .pdoc-code .nn {
            color: #0000FF;
            font-weight: bold
        }

        .pdoc-code .nt {
            color: #008000;
            font-weight: bold
        }

        .pdoc-code .nv {
            color: #19177C
        }

        .pdoc-code .ow {
            color: #AA22FF;
            font-weight: bold
        }

        .pdoc-code .w {
            color: #bbbbbb
        }

        .pdoc-code .mb {
            color: #666666
        }

        .pdoc-code .mf {
            color: #666666
        }

        .pdoc-code .mh {
            color: #666666
        }

        .pdoc-code .mi {
            color: #666666
        }

        .pdoc-code .mo {
            color: #666666
        }

        .pdoc-code .sa {
            color: #BA2121
        }

        .pdoc-code .sb {
            color: #BA2121
        }

        .pdoc-code .sc {
            color: #BA2121
        }

        .pdoc-code .dl {
            color: #BA2121
        }

        .pdoc-code .sd {
            color: #BA2121;
            font-style: italic
        }

        .pdoc-code .s2 {
            color: #BA2121
        }

        .pdoc-code .se {
            color: #AA5D1F;
            font-weight: bold
        }

        .pdoc-code .sh {
            color: #BA2121
        }

        .pdoc-code .si {
            color: #A45A77;
            font-weight: bold
        }

        .pdoc-code .sx {
            color: #008000
        }

        .pdoc-code .sr {
            color: #A45A77
        }

        .pdoc-code .s1 {
            color: #BA2121
        }

        .pdoc-code .ss {
            color: #19177C
        }

        .pdoc-code .bp {
            color: #008000
        }

        .pdoc-code .fm {
            color: #0000FF
        }

        .pdoc-code .vc {
            color: #19177C
        }

        .pdoc-code .vg {
            color: #19177C
        }

        .pdoc-code .vi {
            color: #19177C
        }

        .pdoc-code .vm {
            color: #19177C
        }

        .pdoc-code .il {
            color: #666666
        }
    </style>
    <style>
        /*! theme.css */
        :root {
            --pdoc-background: #fff;
        }

        .pdoc {
            --text: #212529;
            --muted: #6c757d;
            --link: #3660a5;
            --link-hover: #1659c5;
            --code: #f8f8f8;
            --active: #fff598;
            --accent: #eee;
            --accent2: #c1c1c1;
            --nav-hover: rgba(255, 255, 255, 0.5);
            --name: #0066BB;
            --def: #008800;
            --annotation: #007020;
        }
    </style>
    <style>
        /*! layout.css */
        html,
        body {
            width: 100%;
            height: 100%;
        }

        html,
        main {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--pdoc-background);
        }

        @media (max-width:769px) {
            #navtoggle {
                cursor: pointer;
                position: absolute;
                width: 50px;
                height: 40px;
                top: 1rem;
                right: 1rem;
                border-color: var(--text);
                color: var(--text);
                display: flex;
                opacity: 0.8;
                z-index: 999;
            }

            #navtoggle:hover {
                opacity: 1;
            }

            #togglestate+div {
                display: none;
            }

            #togglestate:checked+div {
                display: inherit;
            }

            main,
            header {
                padding: 2rem 3vw;
            }

            header+main {
                margin-top: -3rem;
            }

            .git-button {
                display: none !important;
            }

            nav input[type="search"] {
                max-width: 77%;
            }

            nav input[type="search"]:first-child {
                margin-top: -6px;
            }

            nav input[type="search"]:valid~* {
                display: none !important;
            }
        }

        @media (min-width:770px) {
            :root {
                --sidebar-width: clamp(12.5rem, 28vw, 22rem);
            }

            nav {
                position: fixed;
                overflow: auto;
                height: 100vh;
                width: var(--sidebar-width);
            }

            main,
            header {
                padding: 3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);
                width: calc(54rem + var(--sidebar-width));
                max-width: 100%;
            }

            header+main {
                margin-top: -4rem;
            }

            #navtoggle {
                display: none;
            }
        }

        #togglestate {
            position: absolute;
            height: 0;
            opacity: 0;
        }

        nav.pdoc {
            --pad: clamp(0.5rem, 2vw, 1.75rem);
            --indent: 1.5rem;
            background-color: var(--accent);
            border-right: 1px solid var(--accent2);
            box-shadow: 0 0 20px rgba(50, 50, 50, .2) inset;
            padding: 0 0 0 var(--pad);
            overflow-wrap: anywhere;
            scrollbar-width: thin;
            scrollbar-color: var(--accent2) transparent;
            z-index: 1
        }

        nav.pdoc::-webkit-scrollbar {
            width: .4rem;
        }

        nav.pdoc::-webkit-scrollbar-thumb {
            background-color: var(--accent2);
        }

        nav.pdoc>div {
            padding: var(--pad) 0;
        }

        nav.pdoc .module-list-button {
            display: inline-flex;
            align-items: center;
            color: var(--text);
            border-color: var(--muted);
            margin-bottom: 1rem;
        }

        nav.pdoc .module-list-button:hover {
            border-color: var(--text);
        }

        nav.pdoc input[type=search] {
            display: block;
            outline-offset: 0;
            width: calc(100% - var(--pad));
        }

        nav.pdoc .logo {
            max-width: calc(100% - var(--pad));
            max-height: 35vh;
            display: block;
            margin: 0 auto 1rem;
            transform: translate(calc(-.5 * var(--pad)), 0);
        }

        nav.pdoc ul {
            list-style: none;
            padding-left: 0;
        }

        nav.pdoc>div>ul {
            margin-left: calc(0px - var(--pad));
        }

        nav.pdoc li a {
            padding: .2rem 0 .2rem calc(var(--pad) + var(--indent));
        }

        nav.pdoc>div>ul>li>a {
            padding-left: var(--pad);
        }

        nav.pdoc li {
            transition: all 100ms;
        }

        nav.pdoc li:hover {
            background-color: var(--nav-hover);
        }

        nav.pdoc a,
        nav.pdoc a:hover {
            color: var(--text);
        }

        nav.pdoc a {
            display: block;
        }

        nav.pdoc>h2:first-of-type {
            margin-top: 1.5rem;
        }

        nav.pdoc .class:before {
            content: "class ";
            color: var(--muted);
        }

        nav.pdoc .function:after {
            content: "()";
            color: var(--muted);
        }

        nav.pdoc footer:before {
            content: "";
            display: block;
            width: calc(100% - var(--pad));
            border-top: solid var(--accent2) 1px;
            margin-top: 1.5rem;
            padding-top: .5rem;
        }

        nav.pdoc footer {
            font-size: small;
        }
    </style>
    <style>
        /*! content.css */
        .pdoc {
            color: var(--text);
            box-sizing: border-box;
            line-height: 1.5;
            background: none;
        }

        .pdoc .pdoc-button {
            cursor: pointer;
            display: inline-block;
            border: solid black 1px;
            border-radius: 2px;
            font-size: .75rem;
            padding: calc(0.5em - 1px) 1em;
            transition: 100ms all;
        }

        .pdoc .alert {
            padding: 1rem 1rem 1rem calc(1.5rem + 24px);
            border: 1px solid transparent;
            border-radius: .25rem;
            background-repeat: no-repeat;
            background-position: .75rem center;
            margin-bottom: 1rem;
        }

        .pdoc .alert>em {
            display: none;
        }

        .pdoc .alert>*:last-child {
            margin-bottom: 0;
        }

        .pdoc .alert.note {
            color: #084298;
            background-color: #cfe2ff;
            border-color: #b6d4fe;
            background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");
        }

        .pdoc .alert.tip {
            color: #0a3622;
            background-color: #d1e7dd;
            border-color: #a3cfbb;
            background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");
        }

        .pdoc .alert.important {
            color: #055160;
            background-color: #cff4fc;
            border-color: #9eeaf9;
            background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");
        }

        .pdoc .alert.warning {
            color: #664d03;
            background-color: #fff3cd;
            border-color: #ffecb5;
            background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");
        }

        .pdoc .alert.caution {
            color: #842029;
            background-color: #f8d7da;
            border-color: #f5c2c7;
            background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");
        }

        .pdoc .alert.danger {
            color: #842029;
            background-color: #f8d7da;
            border-color: #f5c2c7;
            background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");
        }

        .pdoc .visually-hidden {
            position: absolute !important;
            width: 1px !important;
            height: 1px !important;
            padding: 0 !important;
            margin: -1px !important;
            overflow: hidden !important;
            clip: rect(0, 0, 0, 0) !important;
            white-space: nowrap !important;
            border: 0 !important;
        }

        .pdoc h1,
        .pdoc h2,
        .pdoc h3 {
            font-weight: 300;
            margin: .3em 0;
            padding: .2em 0;
        }

        .pdoc>section:not(.module-info) h1 {
            font-size: 1.5rem;
            font-weight: 500;
        }

        .pdoc>section:not(.module-info) h2 {
            font-size: 1.4rem;
            font-weight: 500;
        }

        .pdoc>section:not(.module-info) h3 {
            font-size: 1.3rem;
            font-weight: 500;
        }

        .pdoc>section:not(.module-info) h4 {
            font-size: 1.2rem;
        }

        .pdoc>section:not(.module-info) h5 {
            font-size: 1.1rem;
        }

        .pdoc a {
            text-decoration: none;
            color: var(--link);
        }

        .pdoc a:hover {
            color: var(--link-hover);
        }

        .pdoc blockquote {
            margin-left: 2rem;
        }

        .pdoc pre {
            border-top: 1px solid var(--accent2);
            border-bottom: 1px solid var(--accent2);
            margin-top: 0;
            margin-bottom: 1em;
            padding: .5rem 0 .5rem .5rem;
            overflow-x: auto;
            background-color: var(--code);
        }

        .pdoc code {
            color: var(--text);
            padding: .2em .4em;
            margin: 0;
            font-size: 85%;
            background-color: var(--accent);
            border-radius: 6px;
        }

        .pdoc a>code {
            color: inherit;
        }

        .pdoc pre>code {
            display: inline-block;
            font-size: inherit;
            background: none;
            border: none;
            padding: 0;
        }

        .pdoc>section:not(.module-info) {
            margin-bottom: 1.5rem;
        }

        .pdoc .modulename {
            margin-top: 0;
            font-weight: bold;
        }

        .pdoc .modulename a {
            color: var(--link);
            transition: 100ms all;
        }

        .pdoc .git-button {
            float: right;
            border: solid var(--link) 1px;
        }

        .pdoc .git-button:hover {
            background-color: var(--link);
            color: var(--pdoc-background);
        }

        .view-source-toggle-state,
        .view-source-toggle-state~.pdoc-code {
            display: none;
        }

        .view-source-toggle-state:checked~.pdoc-code {
            display: block;
        }

        .view-source-button {
            display: inline-block;
            float: right;
            font-size: .75rem;
            line-height: 1.5rem;
            color: var(--muted);
            padding: 0 .4rem 0 1.3rem;
            cursor: pointer;
            text-indent: -2px;
        }

        .view-source-button>span {
            visibility: hidden;
        }

        .module-info .view-source-button {
            float: none;
            display: flex;
            justify-content: flex-end;
            margin: -1.2rem .4rem -.2rem 0;
        }

        .view-source-button::before {
            position: absolute;
            content: "View Source";
            display: list-item;
            list-style-type: disclosure-closed;
        }

        .view-source-toggle-state:checked~.attr .view-source-button::before,
        .view-source-toggle-state:checked~.view-source-button::before {
            list-style-type: disclosure-open;
        }

        .pdoc .docstring {
            margin-bottom: 1.5rem;
        }

        .pdoc section:not(.module-info) .docstring {
            margin-left: clamp(0rem, 5vw - 2rem, 1rem);
        }

        .pdoc .docstring .pdoc-code {
            margin-left: 1em;
            margin-right: 1em;
        }

        .pdoc h1:target,
        .pdoc h2:target,
        .pdoc h3:target,
        .pdoc h4:target,
        .pdoc h5:target,
        .pdoc h6:target,
        .pdoc .pdoc-code>pre>span:target {
            background-color: var(--active);
            box-shadow: -1rem 0 0 0 var(--active);
        }

        .pdoc .pdoc-code>pre>span:target {
            display: block;
        }

        .pdoc div:target>.attr,
        .pdoc section:target>.attr,
        .pdoc dd:target>a {
            background-color: var(--active);
        }

        .pdoc * {
            scroll-margin: 2rem;
        }

        .pdoc .pdoc-code .linenos {
            user-select: none;
        }

        .pdoc .attr:hover {
            filter: contrast(0.95);
        }

        .pdoc section,
        .pdoc .classattr {
            position: relative;
        }

        .pdoc .headerlink {
            --width: clamp(1rem, 3vw, 2rem);
            position: absolute;
            top: 0;
            left: calc(0rem - var(--width));
            transition: all 100ms ease-in-out;
            opacity: 0;
        }

        .pdoc .headerlink::before {
            content: "#";
            display: block;
            text-align: center;
            width: var(--width);
            height: 2.3rem;
            line-height: 2.3rem;
            font-size: 1.5rem;
        }

        .pdoc .attr:hover~.headerlink,
        .pdoc *:target>.headerlink,
        .pdoc .headerlink:hover {
            opacity: 1;
        }

        .pdoc .attr {
            display: block;
            margin: .5rem 0 .5rem;
            padding: .4rem .4rem .4rem 1rem;
            background-color: var(--accent);
            overflow-x: auto;
        }

        .pdoc .classattr {
            margin-left: 2rem;
        }

        .pdoc .decorator-deprecated {
            color: #842029;
        }

        .pdoc .decorator-deprecated~span {
            filter: grayscale(1) opacity(0.8);
        }

        .pdoc .name {
            color: var(--name);
            font-weight: bold;
        }

        .pdoc .def {
            color: var(--def);
            font-weight: bold;
        }

        .pdoc .signature {
            background-color: transparent;
        }

        .pdoc .param,
        .pdoc .return-annotation {
            white-space: pre;
        }

        .pdoc .signature.multiline .param {
            display: block;
        }

        .pdoc .signature.condensed .param {
            display: inline-block;
        }

        .pdoc .annotation {
            color: var(--annotation);
        }

        .pdoc .view-value-toggle-state,
        .pdoc .view-value-toggle-state~.default_value {
            display: none;
        }

        .pdoc .view-value-toggle-state:checked~.default_value {
            display: inherit;
        }

        .pdoc .view-value-button {
            font-size: .5rem;
            vertical-align: middle;
            border-style: dashed;
            margin-top: -0.1rem;
        }

        .pdoc .view-value-button:hover {
            background: white;
        }

        .pdoc .view-value-button::before {
            content: "show";
            text-align: center;
            width: 2.2em;
            display: inline-block;
        }

        .pdoc .view-value-toggle-state:checked~.view-value-button::before {
            content: "hide";
        }

        .pdoc .inherited {
            margin-left: 2rem;
        }

        .pdoc .inherited dt {
            font-weight: 700;
        }

        .pdoc .inherited dt,
        .pdoc .inherited dd {
            display: inline;
            margin-left: 0;
            margin-bottom: .5rem;
        }

        .pdoc .inherited dd:not(:last-child):after {
            content: ", ";
        }

        .pdoc .inherited .class:before {
            content: "class ";
        }

        .pdoc .inherited .function a:after {
            content: "()";
        }

        .pdoc .search-result .docstring {
            overflow: auto;
            max-height: 25vh;
        }

        .pdoc .search-result.focused>.attr {
            background-color: var(--active);
        }

        .pdoc .attribution {
            margin-top: 2rem;
            display: block;
            opacity: 0.5;
            transition: all 200ms;
            filter: grayscale(100%);
        }

        .pdoc .attribution:hover {
            opacity: 1;
            filter: grayscale(0%);
        }

        .pdoc .attribution img {
            margin-left: 5px;
            height: 35px;
            vertical-align: middle;
            width: 70px;
            transition: all 200ms;
        }

        .pdoc table {
            display: block;
            width: max-content;
            max-width: 100%;
            overflow: auto;
            margin-bottom: 1rem;
        }

        .pdoc table th {
            font-weight: 600;
        }

        .pdoc table th,
        .pdoc table td {
            padding: 6px 13px;
            border: 1px solid var(--accent2);
        }
    </style>
    <style>
        /*! custom.css */
    </style>
</head>

<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg'
                viewBox='0 0 30 30'>
                <path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2'
                    d='M4 7h22M4 15h22M4 23h22' />
            </svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div> <a class="pdoc-button module-list-button" href="../controladores.html">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                        d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z" />
                    <path fill-rule="evenodd"
                        d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z" />
                </svg> &nbsp;controladores</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search" pattern=".+" required>



            <h2>API Documentation</h2>
            <ul class="memberlist">
                <li>
                    <a class="class" href="#ClientesControlador">ClientesControlador</a>
                    <ul class="memberlist">
                        <li>
                            <a class="function" href="#ClientesControlador.__init__">ClientesControlador</a>
                        </li>
                        <li>
                            <a class="variable" href="#ClientesControlador.ventana">ventana</a>
                        </li>
                        <li>
                            <a class="variable" href="#ClientesControlador.ventana_anterior">ventana_anterior</a>
                        </li>
                        <li>
                            <a class="variable" href="#ClientesControlador.lista_clientes">lista_clientes</a>
                        </li>
                        <li>
                            <a class="variable"
                                href="#ClientesControlador.cliente_seleccionado_id">cliente_seleccionado_id</a>
                        </li>
                        <li>
                            <a class="variable" href="#ClientesControlador.dict_nombres">dict_nombres</a>
                        </li>
                        <li>
                            <a class="variable" href="#ClientesControlador.dict_dnis">dict_dnis</a>
                        </li>
                        <li>
                            <a class="variable" href="#ClientesControlador.dict_telefonos">dict_telefonos</a>
                        </li>
                        <li>
                            <a class="function" href="#ClientesControlador.eventFilter">eventFilter</a>
                        </li>
                        <li>
                            <a class="function" href="#ClientesControlador.volver">volver</a>
                        </li>
                        <li>
                            <a class="function" href="#ClientesControlador.limpiar_campos">limpiar_campos</a>
                        </li>
                        <li>
                            <a class="function" href="#ClientesControlador.registrar_cliente">registrar_cliente</a>
                        </li>
                        <li>
                            <a class="function" href="#ClientesControlador.rellenar_campos">rellenar_campos</a>
                        </li>
                        <li>
                            <a class="function" href="#ClientesControlador.validar_email">validar_email</a>
                        </li>
                        <li>
                            <a class="function" href="#ClientesControlador.mostrar_error">mostrar_error</a>
                        </li>
                        <li>
                            <a class="function" href="#ClientesControlador.mostrar_info">mostrar_info</a>
                        </li>
                        <li>
                            <a class="function" href="#ClientesControlador.modificar_cliente">modificar_cliente</a>
                        </li>
                        <li>
                            <a class="function" href="#ClientesControlador.eliminar_cliente">eliminar_cliente</a>
                        </li>
                        <li>
                            <a class="variable" href="#ClientesControlador.staticMetaObject">staticMetaObject</a>
                        </li>
                    </ul>

                </li>
            </ul>

        </div>
    </nav>
    <main class="pdoc">
        <section class="module-info">
            <h1 class="modulename">
                <a href="./../controladores.html">controladores</a><wbr>.clientes_controlador
            </h1>

            <div class="docstring">
                <p>Controlador para la gestión de clientes en la aplicación ReyBoxes.</p>

                <p>Permite:</p>

                <ul>
                    <li>Registrar nuevos clientes.</li>
                    <li>Modificar o eliminar clientes existentes.</li>
                    <li>Buscar clientes por nombre, DNI o teléfono con autocompletado.</li>
                    <li>Validar datos como formato de email y validez de DNI.</li>
                </ul>

                <p>Este controlador enlaza con la interfaz <code>VentanaClientes</code> y los modelos de
                    consulta de clientes en base de datos, ofreciendo interacción completa
                    a nivel de datos y visual.</p>
            </div>

            <input id="mod-clientes_controlador-view-source" class="view-source-toggle-state" type="checkbox"
                aria-hidden="true" tabindex="-1">

            <label class="view-source-button" for="mod-clientes_controlador-view-source"><span>View
                    Source</span></label>

            <div class="pdoc-code codehilite">
                <pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="sd">Controlador para la gestión de clientes en la aplicación ReyBoxes.</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="sd">Permite:</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="sd">- Registrar nuevos clientes.</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="sd">- Modificar o eliminar clientes existentes.</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="sd">- Buscar clientes por nombre, DNI o teléfono con autocompletado.</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="sd">- Validar datos como formato de email y validez de DNI.</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="sd">Este controlador enlaza con la interfaz `VentanaClientes` y los modelos de</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="sd">consulta de clientes en base de datos, ofreciendo interacción completa</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="sd">a nivel de datos y visual.</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">PySide6.QtWidgets</span><span class="w"> </span><span class="kn">import</span> <span class="n">QMessageBox</span><span class="p">,</span> <span class="n">QCompleter</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">PySide6.QtCore</span><span class="w"> </span><span class="kn">import</span> <span class="n">Qt</span><span class="p">,</span> <span class="n">QEvent</span><span class="p">,</span> <span class="n">QObject</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">vistas.ventana_clientes</span><span class="w"> </span><span class="kn">import</span> <span class="n">VentanaClientes</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">modelos.clientes_consultas</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a>    <span class="n">crear_cliente</span><span class="p">,</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a>    <span class="n">dni_ya_existe</span><span class="p">,</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a>    <span class="n">buscar_clientes_por_nombre</span><span class="p">,</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a>    <span class="n">obtener_cliente_por_id</span><span class="p">,</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a>    <span class="n">obtener_clientes</span> <span class="k">as</span> <span class="n">obtener_todos_los_clientes</span><span class="p">,</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a>    <span class="n">actualizar_cliente</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="p">)</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">utilidades.comprobar_dni</span><span class="w"> </span><span class="kn">import</span> <span class="n">DNIUtils</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ClientesControlador</span><span class="p">(</span><span class="n">QObject</span><span class="p">):</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ventana_anterior</span><span class="p">):</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a><span class="sd">        Inicializa el controlador de clientes y configura eventos.</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="sd">        Args:</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="sd">            ventana_anterior: Ventana desde la que se abre este módulo (para volver).</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;controlador_clientes&quot;</span><span class="p">)</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span> <span class="o">=</span> <span class="n">VentanaClientes</span><span class="p">()</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana_anterior</span> <span class="o">=</span> <span class="n">ventana_anterior</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_volver</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">volver</span><span class="p">)</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_limpiar</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limpiar_campos</span><span class="p">)</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_guardar</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">registrar_cliente</span><span class="p">)</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_modificar</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modificar_cliente</span><span class="p">)</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_modificar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_eliminar</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eliminar_cliente</span><span class="p">)</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_eliminar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">lista_clientes</span> <span class="o">=</span> <span class="n">obtener_todos_los_clientes</span><span class="p">()</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a>        <span class="c1"># Diccionarios para búsquedas</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dict_nombres</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dict_dnis</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dict_telefonos</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a>        <span class="k">for</span> <span class="n">cliente</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lista_clientes</span><span class="p">:</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a>            <span class="n">nombre_completo</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cliente</span><span class="p">[</span><span class="s1">&#39;nombre&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">cliente</span><span class="p">[</span><span class="s1">&#39;primer_apellido&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">cliente</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;segundo_apellido&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a>            <span class="p">)</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dict_nombres</span><span class="p">[</span><span class="n">nombre_completo</span><span class="p">]</span> <span class="o">=</span> <span class="n">cliente</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dict_dnis</span><span class="p">[</span><span class="n">cliente</span><span class="p">[</span><span class="s1">&#39;dni&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">cliente</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a>            <span class="k">if</span> <span class="n">cliente</span><span class="p">[</span><span class="s1">&#39;telefono&#39;</span><span class="p">]:</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">dict_telefonos</span><span class="p">[</span><span class="n">cliente</span><span class="p">[</span><span class="s1">&#39;telefono&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">cliente</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a>        <span class="c1"># Completers</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a>        <span class="n">completer_nombre</span> <span class="o">=</span> <span class="n">QCompleter</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dict_nombres</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a>        <span class="n">completer_nombre</span><span class="o">.</span><span class="n">setCaseSensitivity</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">CaseInsensitive</span><span class="p">)</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a>        <span class="n">completer_nombre</span><span class="o">.</span><span class="n">setFilterMode</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">MatchContains</span><span class="p">)</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_nombre</span><span class="o">.</span><span class="n">setCompleter</span><span class="p">(</span><span class="n">completer_nombre</span><span class="p">)</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_nombre</span><span class="o">.</span><span class="n">installEventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a>        <span class="n">completer_dni</span> <span class="o">=</span> <span class="n">QCompleter</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dict_dnis</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a>        <span class="n">completer_dni</span><span class="o">.</span><span class="n">setCaseSensitivity</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">CaseInsensitive</span><span class="p">)</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a>        <span class="n">completer_dni</span><span class="o">.</span><span class="n">setFilterMode</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">MatchContains</span><span class="p">)</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_dni</span><span class="o">.</span><span class="n">setCompleter</span><span class="p">(</span><span class="n">completer_dni</span><span class="p">)</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_dni</span><span class="o">.</span><span class="n">installEventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>        <span class="n">completer_tel</span> <span class="o">=</span> <span class="n">QCompleter</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dict_telefonos</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a>        <span class="n">completer_tel</span><span class="o">.</span><span class="n">setCaseSensitivity</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">CaseInsensitive</span><span class="p">)</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a>        <span class="n">completer_tel</span><span class="o">.</span><span class="n">setFilterMode</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">MatchContains</span><span class="p">)</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_telefono</span><span class="o">.</span><span class="n">setCompleter</span><span class="p">(</span><span class="n">completer_tel</span><span class="p">)</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_telefono</span><span class="o">.</span><span class="n">installEventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">eventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a><span class="sd">        Captura la pulsación de Enter en los campos de búsqueda para autocompletar datos.</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a><span class="sd">        Args:</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a><span class="sd">            source: Campo de texto que emite el evento.</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a><span class="sd">            event: Evento generado.</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="sd">        Returns:</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a><span class="sd">            bool: True si se gestiona el evento, False si se delega.</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a>        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="n">QEvent</span><span class="o">.</span><span class="n">KeyPress</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Key_Return</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Enter</span><span class="p">):</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a>            <span class="k">if</span> <span class="n">source</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_nombre</span><span class="p">:</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a>                <span class="n">texto</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a>                <span class="n">cliente</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_nombres</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">texto</span><span class="p">)</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a>                <span class="k">if</span> <span class="n">cliente</span><span class="p">:</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">rellenar_campos</span><span class="p">(</span><span class="n">cliente</span><span class="p">)</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>                    <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a>            <span class="k">elif</span> <span class="n">source</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_dni</span><span class="p">:</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a>                <span class="n">texto</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>                <span class="n">cliente</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_dnis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">texto</span><span class="p">)</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>                <span class="k">if</span> <span class="n">cliente</span><span class="p">:</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">rellenar_campos</span><span class="p">(</span><span class="n">cliente</span><span class="p">)</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a>                    <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a>            <span class="k">elif</span> <span class="n">source</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_telefono</span><span class="p">:</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a>                <span class="n">texto</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a>                <span class="n">cliente</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_telefonos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">texto</span><span class="p">)</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>                <span class="k">if</span> <span class="n">cliente</span><span class="p">:</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">rellenar_campos</span><span class="p">(</span><span class="n">cliente</span><span class="p">)</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>                    <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">eventFilter</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">volver</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cierra esta ventana y vuelve a la anterior.&quot;&quot;&quot;</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana_anterior</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">limpiar_campos</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Limpia todos los campos del formulario de cliente.&quot;&quot;&quot;</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_nombre</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido1</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido2</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_dni</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_telefono</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_email</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_direccion</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_cp</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_localidad</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_provincia</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_observaciones</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_nombre</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_dni</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_telefono</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_modificar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">registrar_cliente</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a><span class="sd">        Valida e inserta un nuevo cliente en la base de datos.</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a><span class="sd">        Requiere como obligatorios: nombre, primer apellido y DNI.</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a><span class="sd">        Verifica la validez del DNI y el formato de correo si se indica.</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a><span class="sd">        Previene duplicados por DNI.</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a>        <span class="n">nombre</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_nombre</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>        <span class="n">apellido1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido1</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>        <span class="n">apellido2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido2</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a>        <span class="n">dni</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_dni</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>        <span class="n">telefono</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_telefono</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>        <span class="n">email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_email</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>        <span class="n">direccion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_direccion</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>        <span class="n">cp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_cp</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>        <span class="n">localidad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_localidad</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>        <span class="n">provincia</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_provincia</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>        <span class="n">observaciones</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_observaciones</span><span class="o">.</span><span class="n">toPlainText</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">nombre</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">apellido1</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">dni</span><span class="p">:</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a>                <span class="s2">&quot;Nombre, primer apellido y DNI son obligatorios.&quot;</span><span class="p">)</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a>            <span class="k">return</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">DNIUtils</span><span class="o">.</span><span class="n">validar_dni</span><span class="p">(</span><span class="n">dni</span><span class="p">):</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;El DNI introducido no es válido.&quot;</span><span class="p">)</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>            <span class="k">return</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a>        <span class="k">if</span> <span class="n">email</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">validar_email</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a>                <span class="s2">&quot;El correo electrónico no tiene un formato válido.&quot;</span><span class="p">)</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a>            <span class="k">return</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a>        <span class="k">if</span> <span class="n">dni_ya_existe</span><span class="p">(</span><span class="n">dni</span><span class="p">):</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;Ya existe un cliente con ese DNI.&quot;</span><span class="p">)</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>            <span class="k">return</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a>        <span class="n">exito</span> <span class="o">=</span> <span class="n">crear_cliente</span><span class="p">(</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>            <span class="n">nombre</span><span class="p">,</span> <span class="n">apellido1</span><span class="p">,</span> <span class="n">apellido2</span><span class="p">,</span> <span class="n">dni</span><span class="p">,</span> <span class="n">telefono</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a>            <span class="n">direccion</span><span class="p">,</span> <span class="n">cp</span><span class="p">,</span> <span class="n">localidad</span><span class="p">,</span> <span class="n">provincia</span><span class="p">,</span> <span class="n">observaciones</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>        <span class="p">)</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a>        <span class="k">if</span> <span class="n">exito</span><span class="p">:</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_info</span><span class="p">(</span><span class="s2">&quot;Cliente registrado correctamente.&quot;</span><span class="p">)</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">limpiar_campos</span><span class="p">()</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;Ocurrió un error al registrar el cliente.&quot;</span><span class="p">)</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">rellenar_campos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cliente</span><span class="p">):</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="sd">        Rellena el formulario con los datos de un cliente existente.</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a><span class="sd">        Args:</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a><span class="sd">            cliente (dict): Diccionario con datos del cliente.</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span> <span class="o">=</span> <span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_modificar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_eliminar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_nombre</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;nombre&quot;</span><span class="p">])</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido1</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;primer_apellido&quot;</span><span class="p">])</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido2</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;segundo_apellido&quot;</span><span class="p">])</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_dni</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;dni&quot;</span><span class="p">])</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_telefono</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;telefono&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_email</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;email&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_direccion</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;direccion&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_cp</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;codigo_postal&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_localidad</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;localidad&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_provincia</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;provincia&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_observaciones</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a>            <span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;observaciones&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">validar_email</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a><span class="sd">        Comprueba si el email tiene un formato válido.</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a><span class="sd">        Args:</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a><span class="sd">            email (str): Dirección a validar.</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a><span class="sd">        Returns:</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a><span class="sd">            bool: True si es válido, False en caso contrario.</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a>        <span class="n">patron</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;^[\w\.-]+@[\w\.-]+\.\w+$&#39;</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a>        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">patron</span><span class="p">,</span> <span class="n">email</span><span class="p">)</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mostrar_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mensaje</span><span class="p">):</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Muestra un cuadro de error con el mensaje especificado.&quot;&quot;&quot;</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a>        <span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="n">mensaje</span><span class="p">)</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mostrar_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mensaje</span><span class="p">):</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Muestra un cuadro informativo con el mensaje especificado.&quot;&quot;&quot;</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>        <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="p">,</span> <span class="s2">&quot;Información&quot;</span><span class="p">,</span> <span class="n">mensaje</span><span class="p">)</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">modificar_cliente</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a><span class="sd">        Permite actualizar los datos de un cliente ya registrado.</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a><span class="sd">        Valida el nuevo DNI si se cambia y comprueba posibles duplicados.</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a><span class="sd">        Valida el formato del correo electrónico.</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span><span class="p">:</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>                <span class="s2">&quot;Primero debes buscar y seleccionar un cliente.&quot;</span><span class="p">)</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a>            <span class="k">return</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a>        <span class="n">nombre</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_nombre</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a>        <span class="n">apellido1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido1</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a>        <span class="n">apellido2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido2</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a>        <span class="n">dni</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_dni</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>        <span class="n">telefono</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_telefono</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a>        <span class="n">email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_email</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>        <span class="n">direccion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_direccion</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a>        <span class="n">cp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_cp</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a>        <span class="n">localidad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_localidad</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a>        <span class="n">provincia</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_provincia</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>        <span class="n">observaciones</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_observaciones</span><span class="o">.</span><span class="n">toPlainText</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>        <span class="n">cliente_original</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>            <span class="p">(</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lista_clientes</span> <span class="k">if</span> <span class="n">c</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">cliente_original</span><span class="p">:</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;No se ha podido obtener el cliente original.&quot;</span><span class="p">)</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>            <span class="k">return</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>        <span class="n">dni_original</span> <span class="o">=</span> <span class="n">cliente_original</span><span class="p">[</span><span class="s2">&quot;dni&quot;</span><span class="p">]</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>        <span class="k">if</span> <span class="n">dni</span> <span class="o">!=</span> <span class="n">dni_original</span><span class="p">:</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">DNIUtils</span><span class="o">.</span><span class="n">validar_dni</span><span class="p">(</span><span class="n">dni</span><span class="p">):</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;El DNI introducido no es válido.&quot;</span><span class="p">)</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>                <span class="k">return</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a>            <span class="k">if</span> <span class="n">dni_ya_existe</span><span class="p">(</span><span class="n">dni</span><span class="p">):</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;Ya existe un cliente con ese DNI.&quot;</span><span class="p">)</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>                <span class="k">return</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>        <span class="k">if</span> <span class="n">email</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">validar_email</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a>                <span class="s2">&quot;El correo electrónico no tiene un formato válido.&quot;</span><span class="p">)</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a>            <span class="k">return</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>        <span class="n">exito</span> <span class="o">=</span> <span class="n">actualizar_cliente</span><span class="p">(</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span><span class="p">,</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>            <span class="n">nombre</span><span class="p">,</span> <span class="n">apellido1</span><span class="p">,</span> <span class="n">apellido2</span><span class="p">,</span> <span class="n">dni</span><span class="p">,</span> <span class="n">telefono</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a>            <span class="n">direccion</span><span class="p">,</span> <span class="n">cp</span><span class="p">,</span> <span class="n">localidad</span><span class="p">,</span> <span class="n">provincia</span><span class="p">,</span> <span class="n">observaciones</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a>        <span class="p">)</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>        <span class="k">if</span> <span class="n">exito</span><span class="p">:</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_info</span><span class="p">(</span><span class="s2">&quot;Cliente modificado correctamente.&quot;</span><span class="p">)</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">limpiar_campos</span><span class="p">()</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;Ocurrió un error al modificar el cliente.&quot;</span><span class="p">)</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">eliminar_cliente</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a><span class="sd">        Solicita confirmación y elimina un cliente si es aceptado.</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a><span class="sd">        No afecta a sus intervenciones o vehículos registrados.</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span><span class="p">:</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a>                <span class="s2">&quot;Primero debes seleccionar un cliente para eliminar.&quot;</span><span class="p">)</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a>            <span class="k">return</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a>        <span class="n">confirmacion</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="p">,</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a>            <span class="s2">&quot;Confirmar eliminación&quot;</span><span class="p">,</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a>            <span class="s2">&quot;¿Estás seguro de que deseas eliminar este cliente?</span><span class="se">\n</span><span class="s2">Esta acción no eliminará sus reparaciones ni vehículos.&quot;</span><span class="p">,</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a>            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a>        <span class="p">)</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a>        <span class="k">if</span> <span class="n">confirmacion</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>            <span class="kn">from</span><span class="w"> </span><span class="nn">modelos.clientes_consultas</span><span class="w"> </span><span class="kn">import</span> <span class="n">eliminar_cliente_por_id</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a>            <span class="n">exito</span> <span class="o">=</span> <span class="n">eliminar_cliente_por_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span><span class="p">)</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>            <span class="k">if</span> <span class="n">exito</span><span class="p">:</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_info</span><span class="p">(</span><span class="s2">&quot;Cliente eliminado correctamente.&quot;</span><span class="p">)</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">limpiar_campos</span><span class="p">()</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_nombre</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_dni</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_telefono</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_modificar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_eliminar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">lista_clientes</span> <span class="o">=</span> <span class="n">obtener_todos_los_clientes</span><span class="p">()</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;Error al eliminar el cliente.&quot;</span><span class="p">)</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">volver</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a><span class="sd">        Cierra la ventana actual y regresa a la ventana anterior.</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">()</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana_anterior</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></pre>
            </div>


        </section>
        <section id="ClientesControlador">
            <input id="ClientesControlador-view-source" class="view-source-toggle-state" type="checkbox"
                aria-hidden="true" tabindex="-1">
            <div class="attr class">

                <span class="def">class</span>
                <span class="name">ClientesControlador</span><wbr>(<span class="base">PySide6.QtCore.QObject</span>):

                <label class="view-source-button" for="ClientesControlador-view-source"><span>View Source</span></label>

            </div>
            <a class="headerlink" href="#ClientesControlador"></a>
            <div class="pdoc-code codehilite">
                <pre><span></span><span id="ClientesControlador-30"><a href="#ClientesControlador-30"><span class="linenos"> 30</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ClientesControlador</span><span class="p">(</span><span class="n">QObject</span><span class="p">):</span>
</span><span id="ClientesControlador-31"><a href="#ClientesControlador-31"><span class="linenos"> 31</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ventana_anterior</span><span class="p">):</span>
</span><span id="ClientesControlador-32"><a href="#ClientesControlador-32"><span class="linenos"> 32</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ClientesControlador-33"><a href="#ClientesControlador-33"><span class="linenos"> 33</span></a><span class="sd">        Inicializa el controlador de clientes y configura eventos.</span>
</span><span id="ClientesControlador-34"><a href="#ClientesControlador-34"><span class="linenos"> 34</span></a>
</span><span id="ClientesControlador-35"><a href="#ClientesControlador-35"><span class="linenos"> 35</span></a><span class="sd">        Args:</span>
</span><span id="ClientesControlador-36"><a href="#ClientesControlador-36"><span class="linenos"> 36</span></a><span class="sd">            ventana_anterior: Ventana desde la que se abre este módulo (para volver).</span>
</span><span id="ClientesControlador-37"><a href="#ClientesControlador-37"><span class="linenos"> 37</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ClientesControlador-38"><a href="#ClientesControlador-38"><span class="linenos"> 38</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="ClientesControlador-39"><a href="#ClientesControlador-39"><span class="linenos"> 39</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;controlador_clientes&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-40"><a href="#ClientesControlador-40"><span class="linenos"> 40</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span> <span class="o">=</span> <span class="n">VentanaClientes</span><span class="p">()</span>
</span><span id="ClientesControlador-41"><a href="#ClientesControlador-41"><span class="linenos"> 41</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana_anterior</span> <span class="o">=</span> <span class="n">ventana_anterior</span>
</span><span id="ClientesControlador-42"><a href="#ClientesControlador-42"><span class="linenos"> 42</span></a>
</span><span id="ClientesControlador-43"><a href="#ClientesControlador-43"><span class="linenos"> 43</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_volver</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">volver</span><span class="p">)</span>
</span><span id="ClientesControlador-44"><a href="#ClientesControlador-44"><span class="linenos"> 44</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_limpiar</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limpiar_campos</span><span class="p">)</span>
</span><span id="ClientesControlador-45"><a href="#ClientesControlador-45"><span class="linenos"> 45</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_guardar</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">registrar_cliente</span><span class="p">)</span>
</span><span id="ClientesControlador-46"><a href="#ClientesControlador-46"><span class="linenos"> 46</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_modificar</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modificar_cliente</span><span class="p">)</span>
</span><span id="ClientesControlador-47"><a href="#ClientesControlador-47"><span class="linenos"> 47</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_modificar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ClientesControlador-48"><a href="#ClientesControlador-48"><span class="linenos"> 48</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_eliminar</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eliminar_cliente</span><span class="p">)</span>
</span><span id="ClientesControlador-49"><a href="#ClientesControlador-49"><span class="linenos"> 49</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_eliminar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ClientesControlador-50"><a href="#ClientesControlador-50"><span class="linenos"> 50</span></a>
</span><span id="ClientesControlador-51"><a href="#ClientesControlador-51"><span class="linenos"> 51</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">lista_clientes</span> <span class="o">=</span> <span class="n">obtener_todos_los_clientes</span><span class="p">()</span>
</span><span id="ClientesControlador-52"><a href="#ClientesControlador-52"><span class="linenos"> 52</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ClientesControlador-53"><a href="#ClientesControlador-53"><span class="linenos"> 53</span></a>
</span><span id="ClientesControlador-54"><a href="#ClientesControlador-54"><span class="linenos"> 54</span></a>        <span class="c1"># Diccionarios para búsquedas</span>
</span><span id="ClientesControlador-55"><a href="#ClientesControlador-55"><span class="linenos"> 55</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dict_nombres</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="ClientesControlador-56"><a href="#ClientesControlador-56"><span class="linenos"> 56</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dict_dnis</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="ClientesControlador-57"><a href="#ClientesControlador-57"><span class="linenos"> 57</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dict_telefonos</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="ClientesControlador-58"><a href="#ClientesControlador-58"><span class="linenos"> 58</span></a>
</span><span id="ClientesControlador-59"><a href="#ClientesControlador-59"><span class="linenos"> 59</span></a>        <span class="k">for</span> <span class="n">cliente</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lista_clientes</span><span class="p">:</span>
</span><span id="ClientesControlador-60"><a href="#ClientesControlador-60"><span class="linenos"> 60</span></a>            <span class="n">nombre_completo</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cliente</span><span class="p">[</span><span class="s1">&#39;nombre&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">cliente</span><span class="p">[</span><span class="s1">&#39;primer_apellido&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">cliente</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;segundo_apellido&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span>
</span><span id="ClientesControlador-61"><a href="#ClientesControlador-61"><span class="linenos"> 61</span></a>            <span class="p">)</span>
</span><span id="ClientesControlador-62"><a href="#ClientesControlador-62"><span class="linenos"> 62</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dict_nombres</span><span class="p">[</span><span class="n">nombre_completo</span><span class="p">]</span> <span class="o">=</span> <span class="n">cliente</span>
</span><span id="ClientesControlador-63"><a href="#ClientesControlador-63"><span class="linenos"> 63</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dict_dnis</span><span class="p">[</span><span class="n">cliente</span><span class="p">[</span><span class="s1">&#39;dni&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">cliente</span>
</span><span id="ClientesControlador-64"><a href="#ClientesControlador-64"><span class="linenos"> 64</span></a>            <span class="k">if</span> <span class="n">cliente</span><span class="p">[</span><span class="s1">&#39;telefono&#39;</span><span class="p">]:</span>
</span><span id="ClientesControlador-65"><a href="#ClientesControlador-65"><span class="linenos"> 65</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">dict_telefonos</span><span class="p">[</span><span class="n">cliente</span><span class="p">[</span><span class="s1">&#39;telefono&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">cliente</span>
</span><span id="ClientesControlador-66"><a href="#ClientesControlador-66"><span class="linenos"> 66</span></a>
</span><span id="ClientesControlador-67"><a href="#ClientesControlador-67"><span class="linenos"> 67</span></a>        <span class="c1"># Completers</span>
</span><span id="ClientesControlador-68"><a href="#ClientesControlador-68"><span class="linenos"> 68</span></a>        <span class="n">completer_nombre</span> <span class="o">=</span> <span class="n">QCompleter</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dict_nombres</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="ClientesControlador-69"><a href="#ClientesControlador-69"><span class="linenos"> 69</span></a>        <span class="n">completer_nombre</span><span class="o">.</span><span class="n">setCaseSensitivity</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">CaseInsensitive</span><span class="p">)</span>
</span><span id="ClientesControlador-70"><a href="#ClientesControlador-70"><span class="linenos"> 70</span></a>        <span class="n">completer_nombre</span><span class="o">.</span><span class="n">setFilterMode</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">MatchContains</span><span class="p">)</span>
</span><span id="ClientesControlador-71"><a href="#ClientesControlador-71"><span class="linenos"> 71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_nombre</span><span class="o">.</span><span class="n">setCompleter</span><span class="p">(</span><span class="n">completer_nombre</span><span class="p">)</span>
</span><span id="ClientesControlador-72"><a href="#ClientesControlador-72"><span class="linenos"> 72</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_nombre</span><span class="o">.</span><span class="n">installEventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ClientesControlador-73"><a href="#ClientesControlador-73"><span class="linenos"> 73</span></a>
</span><span id="ClientesControlador-74"><a href="#ClientesControlador-74"><span class="linenos"> 74</span></a>        <span class="n">completer_dni</span> <span class="o">=</span> <span class="n">QCompleter</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dict_dnis</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="ClientesControlador-75"><a href="#ClientesControlador-75"><span class="linenos"> 75</span></a>        <span class="n">completer_dni</span><span class="o">.</span><span class="n">setCaseSensitivity</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">CaseInsensitive</span><span class="p">)</span>
</span><span id="ClientesControlador-76"><a href="#ClientesControlador-76"><span class="linenos"> 76</span></a>        <span class="n">completer_dni</span><span class="o">.</span><span class="n">setFilterMode</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">MatchContains</span><span class="p">)</span>
</span><span id="ClientesControlador-77"><a href="#ClientesControlador-77"><span class="linenos"> 77</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_dni</span><span class="o">.</span><span class="n">setCompleter</span><span class="p">(</span><span class="n">completer_dni</span><span class="p">)</span>
</span><span id="ClientesControlador-78"><a href="#ClientesControlador-78"><span class="linenos"> 78</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_dni</span><span class="o">.</span><span class="n">installEventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ClientesControlador-79"><a href="#ClientesControlador-79"><span class="linenos"> 79</span></a>
</span><span id="ClientesControlador-80"><a href="#ClientesControlador-80"><span class="linenos"> 80</span></a>        <span class="n">completer_tel</span> <span class="o">=</span> <span class="n">QCompleter</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dict_telefonos</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="ClientesControlador-81"><a href="#ClientesControlador-81"><span class="linenos"> 81</span></a>        <span class="n">completer_tel</span><span class="o">.</span><span class="n">setCaseSensitivity</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">CaseInsensitive</span><span class="p">)</span>
</span><span id="ClientesControlador-82"><a href="#ClientesControlador-82"><span class="linenos"> 82</span></a>        <span class="n">completer_tel</span><span class="o">.</span><span class="n">setFilterMode</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">MatchContains</span><span class="p">)</span>
</span><span id="ClientesControlador-83"><a href="#ClientesControlador-83"><span class="linenos"> 83</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_telefono</span><span class="o">.</span><span class="n">setCompleter</span><span class="p">(</span><span class="n">completer_tel</span><span class="p">)</span>
</span><span id="ClientesControlador-84"><a href="#ClientesControlador-84"><span class="linenos"> 84</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_telefono</span><span class="o">.</span><span class="n">installEventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ClientesControlador-85"><a href="#ClientesControlador-85"><span class="linenos"> 85</span></a>
</span><span id="ClientesControlador-86"><a href="#ClientesControlador-86"><span class="linenos"> 86</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="ClientesControlador-87"><a href="#ClientesControlador-87"><span class="linenos"> 87</span></a>
</span><span id="ClientesControlador-88"><a href="#ClientesControlador-88"><span class="linenos"> 88</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">eventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="ClientesControlador-89"><a href="#ClientesControlador-89"><span class="linenos"> 89</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ClientesControlador-90"><a href="#ClientesControlador-90"><span class="linenos"> 90</span></a><span class="sd">        Captura la pulsación de Enter en los campos de búsqueda para autocompletar datos.</span>
</span><span id="ClientesControlador-91"><a href="#ClientesControlador-91"><span class="linenos"> 91</span></a>
</span><span id="ClientesControlador-92"><a href="#ClientesControlador-92"><span class="linenos"> 92</span></a><span class="sd">        Args:</span>
</span><span id="ClientesControlador-93"><a href="#ClientesControlador-93"><span class="linenos"> 93</span></a><span class="sd">            source: Campo de texto que emite el evento.</span>
</span><span id="ClientesControlador-94"><a href="#ClientesControlador-94"><span class="linenos"> 94</span></a><span class="sd">            event: Evento generado.</span>
</span><span id="ClientesControlador-95"><a href="#ClientesControlador-95"><span class="linenos"> 95</span></a>
</span><span id="ClientesControlador-96"><a href="#ClientesControlador-96"><span class="linenos"> 96</span></a><span class="sd">        Returns:</span>
</span><span id="ClientesControlador-97"><a href="#ClientesControlador-97"><span class="linenos"> 97</span></a><span class="sd">            bool: True si se gestiona el evento, False si se delega.</span>
</span><span id="ClientesControlador-98"><a href="#ClientesControlador-98"><span class="linenos"> 98</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ClientesControlador-99"><a href="#ClientesControlador-99"><span class="linenos"> 99</span></a>        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="n">QEvent</span><span class="o">.</span><span class="n">KeyPress</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Key_Return</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Enter</span><span class="p">):</span>
</span><span id="ClientesControlador-100"><a href="#ClientesControlador-100"><span class="linenos">100</span></a>            <span class="k">if</span> <span class="n">source</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_nombre</span><span class="p">:</span>
</span><span id="ClientesControlador-101"><a href="#ClientesControlador-101"><span class="linenos">101</span></a>                <span class="n">texto</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-102"><a href="#ClientesControlador-102"><span class="linenos">102</span></a>                <span class="n">cliente</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_nombres</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">texto</span><span class="p">)</span>
</span><span id="ClientesControlador-103"><a href="#ClientesControlador-103"><span class="linenos">103</span></a>                <span class="k">if</span> <span class="n">cliente</span><span class="p">:</span>
</span><span id="ClientesControlador-104"><a href="#ClientesControlador-104"><span class="linenos">104</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">rellenar_campos</span><span class="p">(</span><span class="n">cliente</span><span class="p">)</span>
</span><span id="ClientesControlador-105"><a href="#ClientesControlador-105"><span class="linenos">105</span></a>                    <span class="k">return</span> <span class="kc">True</span>
</span><span id="ClientesControlador-106"><a href="#ClientesControlador-106"><span class="linenos">106</span></a>            <span class="k">elif</span> <span class="n">source</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_dni</span><span class="p">:</span>
</span><span id="ClientesControlador-107"><a href="#ClientesControlador-107"><span class="linenos">107</span></a>                <span class="n">texto</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</span><span id="ClientesControlador-108"><a href="#ClientesControlador-108"><span class="linenos">108</span></a>                <span class="n">cliente</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_dnis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">texto</span><span class="p">)</span>
</span><span id="ClientesControlador-109"><a href="#ClientesControlador-109"><span class="linenos">109</span></a>                <span class="k">if</span> <span class="n">cliente</span><span class="p">:</span>
</span><span id="ClientesControlador-110"><a href="#ClientesControlador-110"><span class="linenos">110</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">rellenar_campos</span><span class="p">(</span><span class="n">cliente</span><span class="p">)</span>
</span><span id="ClientesControlador-111"><a href="#ClientesControlador-111"><span class="linenos">111</span></a>                    <span class="k">return</span> <span class="kc">True</span>
</span><span id="ClientesControlador-112"><a href="#ClientesControlador-112"><span class="linenos">112</span></a>            <span class="k">elif</span> <span class="n">source</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_telefono</span><span class="p">:</span>
</span><span id="ClientesControlador-113"><a href="#ClientesControlador-113"><span class="linenos">113</span></a>                <span class="n">texto</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-114"><a href="#ClientesControlador-114"><span class="linenos">114</span></a>                <span class="n">cliente</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_telefonos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">texto</span><span class="p">)</span>
</span><span id="ClientesControlador-115"><a href="#ClientesControlador-115"><span class="linenos">115</span></a>                <span class="k">if</span> <span class="n">cliente</span><span class="p">:</span>
</span><span id="ClientesControlador-116"><a href="#ClientesControlador-116"><span class="linenos">116</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">rellenar_campos</span><span class="p">(</span><span class="n">cliente</span><span class="p">)</span>
</span><span id="ClientesControlador-117"><a href="#ClientesControlador-117"><span class="linenos">117</span></a>                    <span class="k">return</span> <span class="kc">True</span>
</span><span id="ClientesControlador-118"><a href="#ClientesControlador-118"><span class="linenos">118</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">eventFilter</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span><span id="ClientesControlador-119"><a href="#ClientesControlador-119"><span class="linenos">119</span></a>
</span><span id="ClientesControlador-120"><a href="#ClientesControlador-120"><span class="linenos">120</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">volver</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ClientesControlador-121"><a href="#ClientesControlador-121"><span class="linenos">121</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cierra esta ventana y vuelve a la anterior.&quot;&quot;&quot;</span>
</span><span id="ClientesControlador-122"><a href="#ClientesControlador-122"><span class="linenos">122</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="ClientesControlador-123"><a href="#ClientesControlador-123"><span class="linenos">123</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana_anterior</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="ClientesControlador-124"><a href="#ClientesControlador-124"><span class="linenos">124</span></a>
</span><span id="ClientesControlador-125"><a href="#ClientesControlador-125"><span class="linenos">125</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">limpiar_campos</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ClientesControlador-126"><a href="#ClientesControlador-126"><span class="linenos">126</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Limpia todos los campos del formulario de cliente.&quot;&quot;&quot;</span>
</span><span id="ClientesControlador-127"><a href="#ClientesControlador-127"><span class="linenos">127</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_nombre</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador-128"><a href="#ClientesControlador-128"><span class="linenos">128</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido1</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador-129"><a href="#ClientesControlador-129"><span class="linenos">129</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido2</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador-130"><a href="#ClientesControlador-130"><span class="linenos">130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_dni</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador-131"><a href="#ClientesControlador-131"><span class="linenos">131</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_telefono</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador-132"><a href="#ClientesControlador-132"><span class="linenos">132</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_email</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador-133"><a href="#ClientesControlador-133"><span class="linenos">133</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_direccion</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador-134"><a href="#ClientesControlador-134"><span class="linenos">134</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_cp</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador-135"><a href="#ClientesControlador-135"><span class="linenos">135</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_localidad</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador-136"><a href="#ClientesControlador-136"><span class="linenos">136</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_provincia</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador-137"><a href="#ClientesControlador-137"><span class="linenos">137</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_observaciones</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador-138"><a href="#ClientesControlador-138"><span class="linenos">138</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_nombre</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador-139"><a href="#ClientesControlador-139"><span class="linenos">139</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_dni</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador-140"><a href="#ClientesControlador-140"><span class="linenos">140</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_telefono</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador-141"><a href="#ClientesControlador-141"><span class="linenos">141</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_modificar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ClientesControlador-142"><a href="#ClientesControlador-142"><span class="linenos">142</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ClientesControlador-143"><a href="#ClientesControlador-143"><span class="linenos">143</span></a>
</span><span id="ClientesControlador-144"><a href="#ClientesControlador-144"><span class="linenos">144</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">registrar_cliente</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ClientesControlador-145"><a href="#ClientesControlador-145"><span class="linenos">145</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ClientesControlador-146"><a href="#ClientesControlador-146"><span class="linenos">146</span></a><span class="sd">        Valida e inserta un nuevo cliente en la base de datos.</span>
</span><span id="ClientesControlador-147"><a href="#ClientesControlador-147"><span class="linenos">147</span></a>
</span><span id="ClientesControlador-148"><a href="#ClientesControlador-148"><span class="linenos">148</span></a><span class="sd">        Requiere como obligatorios: nombre, primer apellido y DNI.</span>
</span><span id="ClientesControlador-149"><a href="#ClientesControlador-149"><span class="linenos">149</span></a><span class="sd">        Verifica la validez del DNI y el formato de correo si se indica.</span>
</span><span id="ClientesControlador-150"><a href="#ClientesControlador-150"><span class="linenos">150</span></a><span class="sd">        Previene duplicados por DNI.</span>
</span><span id="ClientesControlador-151"><a href="#ClientesControlador-151"><span class="linenos">151</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ClientesControlador-152"><a href="#ClientesControlador-152"><span class="linenos">152</span></a>        <span class="n">nombre</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_nombre</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-153"><a href="#ClientesControlador-153"><span class="linenos">153</span></a>        <span class="n">apellido1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido1</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-154"><a href="#ClientesControlador-154"><span class="linenos">154</span></a>        <span class="n">apellido2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido2</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-155"><a href="#ClientesControlador-155"><span class="linenos">155</span></a>        <span class="n">dni</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_dni</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-156"><a href="#ClientesControlador-156"><span class="linenos">156</span></a>        <span class="n">telefono</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_telefono</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-157"><a href="#ClientesControlador-157"><span class="linenos">157</span></a>        <span class="n">email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_email</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-158"><a href="#ClientesControlador-158"><span class="linenos">158</span></a>        <span class="n">direccion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_direccion</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-159"><a href="#ClientesControlador-159"><span class="linenos">159</span></a>        <span class="n">cp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_cp</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-160"><a href="#ClientesControlador-160"><span class="linenos">160</span></a>        <span class="n">localidad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_localidad</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-161"><a href="#ClientesControlador-161"><span class="linenos">161</span></a>        <span class="n">provincia</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_provincia</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-162"><a href="#ClientesControlador-162"><span class="linenos">162</span></a>        <span class="n">observaciones</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_observaciones</span><span class="o">.</span><span class="n">toPlainText</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-163"><a href="#ClientesControlador-163"><span class="linenos">163</span></a>
</span><span id="ClientesControlador-164"><a href="#ClientesControlador-164"><span class="linenos">164</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">nombre</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">apellido1</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">dni</span><span class="p">:</span>
</span><span id="ClientesControlador-165"><a href="#ClientesControlador-165"><span class="linenos">165</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span>
</span><span id="ClientesControlador-166"><a href="#ClientesControlador-166"><span class="linenos">166</span></a>                <span class="s2">&quot;Nombre, primer apellido y DNI son obligatorios.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-167"><a href="#ClientesControlador-167"><span class="linenos">167</span></a>            <span class="k">return</span>
</span><span id="ClientesControlador-168"><a href="#ClientesControlador-168"><span class="linenos">168</span></a>
</span><span id="ClientesControlador-169"><a href="#ClientesControlador-169"><span class="linenos">169</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">DNIUtils</span><span class="o">.</span><span class="n">validar_dni</span><span class="p">(</span><span class="n">dni</span><span class="p">):</span>
</span><span id="ClientesControlador-170"><a href="#ClientesControlador-170"><span class="linenos">170</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;El DNI introducido no es válido.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-171"><a href="#ClientesControlador-171"><span class="linenos">171</span></a>            <span class="k">return</span>
</span><span id="ClientesControlador-172"><a href="#ClientesControlador-172"><span class="linenos">172</span></a>
</span><span id="ClientesControlador-173"><a href="#ClientesControlador-173"><span class="linenos">173</span></a>        <span class="k">if</span> <span class="n">email</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">validar_email</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
</span><span id="ClientesControlador-174"><a href="#ClientesControlador-174"><span class="linenos">174</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span>
</span><span id="ClientesControlador-175"><a href="#ClientesControlador-175"><span class="linenos">175</span></a>                <span class="s2">&quot;El correo electrónico no tiene un formato válido.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-176"><a href="#ClientesControlador-176"><span class="linenos">176</span></a>            <span class="k">return</span>
</span><span id="ClientesControlador-177"><a href="#ClientesControlador-177"><span class="linenos">177</span></a>
</span><span id="ClientesControlador-178"><a href="#ClientesControlador-178"><span class="linenos">178</span></a>        <span class="k">if</span> <span class="n">dni_ya_existe</span><span class="p">(</span><span class="n">dni</span><span class="p">):</span>
</span><span id="ClientesControlador-179"><a href="#ClientesControlador-179"><span class="linenos">179</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;Ya existe un cliente con ese DNI.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-180"><a href="#ClientesControlador-180"><span class="linenos">180</span></a>            <span class="k">return</span>
</span><span id="ClientesControlador-181"><a href="#ClientesControlador-181"><span class="linenos">181</span></a>
</span><span id="ClientesControlador-182"><a href="#ClientesControlador-182"><span class="linenos">182</span></a>        <span class="n">exito</span> <span class="o">=</span> <span class="n">crear_cliente</span><span class="p">(</span>
</span><span id="ClientesControlador-183"><a href="#ClientesControlador-183"><span class="linenos">183</span></a>            <span class="n">nombre</span><span class="p">,</span> <span class="n">apellido1</span><span class="p">,</span> <span class="n">apellido2</span><span class="p">,</span> <span class="n">dni</span><span class="p">,</span> <span class="n">telefono</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span>
</span><span id="ClientesControlador-184"><a href="#ClientesControlador-184"><span class="linenos">184</span></a>            <span class="n">direccion</span><span class="p">,</span> <span class="n">cp</span><span class="p">,</span> <span class="n">localidad</span><span class="p">,</span> <span class="n">provincia</span><span class="p">,</span> <span class="n">observaciones</span>
</span><span id="ClientesControlador-185"><a href="#ClientesControlador-185"><span class="linenos">185</span></a>        <span class="p">)</span>
</span><span id="ClientesControlador-186"><a href="#ClientesControlador-186"><span class="linenos">186</span></a>
</span><span id="ClientesControlador-187"><a href="#ClientesControlador-187"><span class="linenos">187</span></a>        <span class="k">if</span> <span class="n">exito</span><span class="p">:</span>
</span><span id="ClientesControlador-188"><a href="#ClientesControlador-188"><span class="linenos">188</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_info</span><span class="p">(</span><span class="s2">&quot;Cliente registrado correctamente.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-189"><a href="#ClientesControlador-189"><span class="linenos">189</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">limpiar_campos</span><span class="p">()</span>
</span><span id="ClientesControlador-190"><a href="#ClientesControlador-190"><span class="linenos">190</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ClientesControlador-191"><a href="#ClientesControlador-191"><span class="linenos">191</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;Ocurrió un error al registrar el cliente.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-192"><a href="#ClientesControlador-192"><span class="linenos">192</span></a>
</span><span id="ClientesControlador-193"><a href="#ClientesControlador-193"><span class="linenos">193</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">rellenar_campos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cliente</span><span class="p">):</span>
</span><span id="ClientesControlador-194"><a href="#ClientesControlador-194"><span class="linenos">194</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ClientesControlador-195"><a href="#ClientesControlador-195"><span class="linenos">195</span></a><span class="sd">        Rellena el formulario con los datos de un cliente existente.</span>
</span><span id="ClientesControlador-196"><a href="#ClientesControlador-196"><span class="linenos">196</span></a>
</span><span id="ClientesControlador-197"><a href="#ClientesControlador-197"><span class="linenos">197</span></a><span class="sd">        Args:</span>
</span><span id="ClientesControlador-198"><a href="#ClientesControlador-198"><span class="linenos">198</span></a><span class="sd">            cliente (dict): Diccionario con datos del cliente.</span>
</span><span id="ClientesControlador-199"><a href="#ClientesControlador-199"><span class="linenos">199</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ClientesControlador-200"><a href="#ClientesControlador-200"><span class="linenos">200</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span> <span class="o">=</span> <span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
</span><span id="ClientesControlador-201"><a href="#ClientesControlador-201"><span class="linenos">201</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_modificar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ClientesControlador-202"><a href="#ClientesControlador-202"><span class="linenos">202</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_eliminar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ClientesControlador-203"><a href="#ClientesControlador-203"><span class="linenos">203</span></a>
</span><span id="ClientesControlador-204"><a href="#ClientesControlador-204"><span class="linenos">204</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_nombre</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;nombre&quot;</span><span class="p">])</span>
</span><span id="ClientesControlador-205"><a href="#ClientesControlador-205"><span class="linenos">205</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido1</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;primer_apellido&quot;</span><span class="p">])</span>
</span><span id="ClientesControlador-206"><a href="#ClientesControlador-206"><span class="linenos">206</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido2</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;segundo_apellido&quot;</span><span class="p">])</span>
</span><span id="ClientesControlador-207"><a href="#ClientesControlador-207"><span class="linenos">207</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_dni</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;dni&quot;</span><span class="p">])</span>
</span><span id="ClientesControlador-208"><a href="#ClientesControlador-208"><span class="linenos">208</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_telefono</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;telefono&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-209"><a href="#ClientesControlador-209"><span class="linenos">209</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_email</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;email&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-210"><a href="#ClientesControlador-210"><span class="linenos">210</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_direccion</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;direccion&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-211"><a href="#ClientesControlador-211"><span class="linenos">211</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_cp</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;codigo_postal&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-212"><a href="#ClientesControlador-212"><span class="linenos">212</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_localidad</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;localidad&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-213"><a href="#ClientesControlador-213"><span class="linenos">213</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_provincia</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;provincia&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-214"><a href="#ClientesControlador-214"><span class="linenos">214</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_observaciones</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
</span><span id="ClientesControlador-215"><a href="#ClientesControlador-215"><span class="linenos">215</span></a>            <span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;observaciones&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-216"><a href="#ClientesControlador-216"><span class="linenos">216</span></a>
</span><span id="ClientesControlador-217"><a href="#ClientesControlador-217"><span class="linenos">217</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">validar_email</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
</span><span id="ClientesControlador-218"><a href="#ClientesControlador-218"><span class="linenos">218</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ClientesControlador-219"><a href="#ClientesControlador-219"><span class="linenos">219</span></a><span class="sd">        Comprueba si el email tiene un formato válido.</span>
</span><span id="ClientesControlador-220"><a href="#ClientesControlador-220"><span class="linenos">220</span></a>
</span><span id="ClientesControlador-221"><a href="#ClientesControlador-221"><span class="linenos">221</span></a><span class="sd">        Args:</span>
</span><span id="ClientesControlador-222"><a href="#ClientesControlador-222"><span class="linenos">222</span></a><span class="sd">            email (str): Dirección a validar.</span>
</span><span id="ClientesControlador-223"><a href="#ClientesControlador-223"><span class="linenos">223</span></a>
</span><span id="ClientesControlador-224"><a href="#ClientesControlador-224"><span class="linenos">224</span></a><span class="sd">        Returns:</span>
</span><span id="ClientesControlador-225"><a href="#ClientesControlador-225"><span class="linenos">225</span></a><span class="sd">            bool: True si es válido, False en caso contrario.</span>
</span><span id="ClientesControlador-226"><a href="#ClientesControlador-226"><span class="linenos">226</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ClientesControlador-227"><a href="#ClientesControlador-227"><span class="linenos">227</span></a>        <span class="n">patron</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;^[\w\.-]+@[\w\.-]+\.\w+$&#39;</span>
</span><span id="ClientesControlador-228"><a href="#ClientesControlador-228"><span class="linenos">228</span></a>        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">patron</span><span class="p">,</span> <span class="n">email</span><span class="p">)</span>
</span><span id="ClientesControlador-229"><a href="#ClientesControlador-229"><span class="linenos">229</span></a>
</span><span id="ClientesControlador-230"><a href="#ClientesControlador-230"><span class="linenos">230</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mostrar_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mensaje</span><span class="p">):</span>
</span><span id="ClientesControlador-231"><a href="#ClientesControlador-231"><span class="linenos">231</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Muestra un cuadro de error con el mensaje especificado.&quot;&quot;&quot;</span>
</span><span id="ClientesControlador-232"><a href="#ClientesControlador-232"><span class="linenos">232</span></a>        <span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="n">mensaje</span><span class="p">)</span>
</span><span id="ClientesControlador-233"><a href="#ClientesControlador-233"><span class="linenos">233</span></a>
</span><span id="ClientesControlador-234"><a href="#ClientesControlador-234"><span class="linenos">234</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mostrar_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mensaje</span><span class="p">):</span>
</span><span id="ClientesControlador-235"><a href="#ClientesControlador-235"><span class="linenos">235</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Muestra un cuadro informativo con el mensaje especificado.&quot;&quot;&quot;</span>
</span><span id="ClientesControlador-236"><a href="#ClientesControlador-236"><span class="linenos">236</span></a>        <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="p">,</span> <span class="s2">&quot;Información&quot;</span><span class="p">,</span> <span class="n">mensaje</span><span class="p">)</span>
</span><span id="ClientesControlador-237"><a href="#ClientesControlador-237"><span class="linenos">237</span></a>
</span><span id="ClientesControlador-238"><a href="#ClientesControlador-238"><span class="linenos">238</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">modificar_cliente</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ClientesControlador-239"><a href="#ClientesControlador-239"><span class="linenos">239</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ClientesControlador-240"><a href="#ClientesControlador-240"><span class="linenos">240</span></a><span class="sd">        Permite actualizar los datos de un cliente ya registrado.</span>
</span><span id="ClientesControlador-241"><a href="#ClientesControlador-241"><span class="linenos">241</span></a>
</span><span id="ClientesControlador-242"><a href="#ClientesControlador-242"><span class="linenos">242</span></a><span class="sd">        Valida el nuevo DNI si se cambia y comprueba posibles duplicados.</span>
</span><span id="ClientesControlador-243"><a href="#ClientesControlador-243"><span class="linenos">243</span></a><span class="sd">        Valida el formato del correo electrónico.</span>
</span><span id="ClientesControlador-244"><a href="#ClientesControlador-244"><span class="linenos">244</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ClientesControlador-245"><a href="#ClientesControlador-245"><span class="linenos">245</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span><span class="p">:</span>
</span><span id="ClientesControlador-246"><a href="#ClientesControlador-246"><span class="linenos">246</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span>
</span><span id="ClientesControlador-247"><a href="#ClientesControlador-247"><span class="linenos">247</span></a>                <span class="s2">&quot;Primero debes buscar y seleccionar un cliente.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-248"><a href="#ClientesControlador-248"><span class="linenos">248</span></a>            <span class="k">return</span>
</span><span id="ClientesControlador-249"><a href="#ClientesControlador-249"><span class="linenos">249</span></a>
</span><span id="ClientesControlador-250"><a href="#ClientesControlador-250"><span class="linenos">250</span></a>        <span class="n">nombre</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_nombre</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-251"><a href="#ClientesControlador-251"><span class="linenos">251</span></a>        <span class="n">apellido1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido1</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-252"><a href="#ClientesControlador-252"><span class="linenos">252</span></a>        <span class="n">apellido2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido2</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-253"><a href="#ClientesControlador-253"><span class="linenos">253</span></a>        <span class="n">dni</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_dni</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-254"><a href="#ClientesControlador-254"><span class="linenos">254</span></a>        <span class="n">telefono</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_telefono</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-255"><a href="#ClientesControlador-255"><span class="linenos">255</span></a>        <span class="n">email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_email</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-256"><a href="#ClientesControlador-256"><span class="linenos">256</span></a>        <span class="n">direccion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_direccion</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-257"><a href="#ClientesControlador-257"><span class="linenos">257</span></a>        <span class="n">cp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_cp</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-258"><a href="#ClientesControlador-258"><span class="linenos">258</span></a>        <span class="n">localidad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_localidad</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-259"><a href="#ClientesControlador-259"><span class="linenos">259</span></a>        <span class="n">provincia</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_provincia</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-260"><a href="#ClientesControlador-260"><span class="linenos">260</span></a>        <span class="n">observaciones</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_observaciones</span><span class="o">.</span><span class="n">toPlainText</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador-261"><a href="#ClientesControlador-261"><span class="linenos">261</span></a>
</span><span id="ClientesControlador-262"><a href="#ClientesControlador-262"><span class="linenos">262</span></a>        <span class="n">cliente_original</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
</span><span id="ClientesControlador-263"><a href="#ClientesControlador-263"><span class="linenos">263</span></a>            <span class="p">(</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lista_clientes</span> <span class="k">if</span> <span class="n">c</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="ClientesControlador-264"><a href="#ClientesControlador-264"><span class="linenos">264</span></a>
</span><span id="ClientesControlador-265"><a href="#ClientesControlador-265"><span class="linenos">265</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">cliente_original</span><span class="p">:</span>
</span><span id="ClientesControlador-266"><a href="#ClientesControlador-266"><span class="linenos">266</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;No se ha podido obtener el cliente original.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-267"><a href="#ClientesControlador-267"><span class="linenos">267</span></a>            <span class="k">return</span>
</span><span id="ClientesControlador-268"><a href="#ClientesControlador-268"><span class="linenos">268</span></a>
</span><span id="ClientesControlador-269"><a href="#ClientesControlador-269"><span class="linenos">269</span></a>        <span class="n">dni_original</span> <span class="o">=</span> <span class="n">cliente_original</span><span class="p">[</span><span class="s2">&quot;dni&quot;</span><span class="p">]</span>
</span><span id="ClientesControlador-270"><a href="#ClientesControlador-270"><span class="linenos">270</span></a>
</span><span id="ClientesControlador-271"><a href="#ClientesControlador-271"><span class="linenos">271</span></a>        <span class="k">if</span> <span class="n">dni</span> <span class="o">!=</span> <span class="n">dni_original</span><span class="p">:</span>
</span><span id="ClientesControlador-272"><a href="#ClientesControlador-272"><span class="linenos">272</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">DNIUtils</span><span class="o">.</span><span class="n">validar_dni</span><span class="p">(</span><span class="n">dni</span><span class="p">):</span>
</span><span id="ClientesControlador-273"><a href="#ClientesControlador-273"><span class="linenos">273</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;El DNI introducido no es válido.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-274"><a href="#ClientesControlador-274"><span class="linenos">274</span></a>                <span class="k">return</span>
</span><span id="ClientesControlador-275"><a href="#ClientesControlador-275"><span class="linenos">275</span></a>            <span class="k">if</span> <span class="n">dni_ya_existe</span><span class="p">(</span><span class="n">dni</span><span class="p">):</span>
</span><span id="ClientesControlador-276"><a href="#ClientesControlador-276"><span class="linenos">276</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;Ya existe un cliente con ese DNI.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-277"><a href="#ClientesControlador-277"><span class="linenos">277</span></a>                <span class="k">return</span>
</span><span id="ClientesControlador-278"><a href="#ClientesControlador-278"><span class="linenos">278</span></a>
</span><span id="ClientesControlador-279"><a href="#ClientesControlador-279"><span class="linenos">279</span></a>        <span class="k">if</span> <span class="n">email</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">validar_email</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
</span><span id="ClientesControlador-280"><a href="#ClientesControlador-280"><span class="linenos">280</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span>
</span><span id="ClientesControlador-281"><a href="#ClientesControlador-281"><span class="linenos">281</span></a>                <span class="s2">&quot;El correo electrónico no tiene un formato válido.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-282"><a href="#ClientesControlador-282"><span class="linenos">282</span></a>            <span class="k">return</span>
</span><span id="ClientesControlador-283"><a href="#ClientesControlador-283"><span class="linenos">283</span></a>
</span><span id="ClientesControlador-284"><a href="#ClientesControlador-284"><span class="linenos">284</span></a>        <span class="n">exito</span> <span class="o">=</span> <span class="n">actualizar_cliente</span><span class="p">(</span>
</span><span id="ClientesControlador-285"><a href="#ClientesControlador-285"><span class="linenos">285</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span><span class="p">,</span>
</span><span id="ClientesControlador-286"><a href="#ClientesControlador-286"><span class="linenos">286</span></a>            <span class="n">nombre</span><span class="p">,</span> <span class="n">apellido1</span><span class="p">,</span> <span class="n">apellido2</span><span class="p">,</span> <span class="n">dni</span><span class="p">,</span> <span class="n">telefono</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span>
</span><span id="ClientesControlador-287"><a href="#ClientesControlador-287"><span class="linenos">287</span></a>            <span class="n">direccion</span><span class="p">,</span> <span class="n">cp</span><span class="p">,</span> <span class="n">localidad</span><span class="p">,</span> <span class="n">provincia</span><span class="p">,</span> <span class="n">observaciones</span>
</span><span id="ClientesControlador-288"><a href="#ClientesControlador-288"><span class="linenos">288</span></a>        <span class="p">)</span>
</span><span id="ClientesControlador-289"><a href="#ClientesControlador-289"><span class="linenos">289</span></a>
</span><span id="ClientesControlador-290"><a href="#ClientesControlador-290"><span class="linenos">290</span></a>        <span class="k">if</span> <span class="n">exito</span><span class="p">:</span>
</span><span id="ClientesControlador-291"><a href="#ClientesControlador-291"><span class="linenos">291</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_info</span><span class="p">(</span><span class="s2">&quot;Cliente modificado correctamente.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-292"><a href="#ClientesControlador-292"><span class="linenos">292</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">limpiar_campos</span><span class="p">()</span>
</span><span id="ClientesControlador-293"><a href="#ClientesControlador-293"><span class="linenos">293</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ClientesControlador-294"><a href="#ClientesControlador-294"><span class="linenos">294</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;Ocurrió un error al modificar el cliente.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-295"><a href="#ClientesControlador-295"><span class="linenos">295</span></a>
</span><span id="ClientesControlador-296"><a href="#ClientesControlador-296"><span class="linenos">296</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">eliminar_cliente</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ClientesControlador-297"><a href="#ClientesControlador-297"><span class="linenos">297</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ClientesControlador-298"><a href="#ClientesControlador-298"><span class="linenos">298</span></a><span class="sd">        Solicita confirmación y elimina un cliente si es aceptado.</span>
</span><span id="ClientesControlador-299"><a href="#ClientesControlador-299"><span class="linenos">299</span></a>
</span><span id="ClientesControlador-300"><a href="#ClientesControlador-300"><span class="linenos">300</span></a><span class="sd">        No afecta a sus intervenciones o vehículos registrados.</span>
</span><span id="ClientesControlador-301"><a href="#ClientesControlador-301"><span class="linenos">301</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ClientesControlador-302"><a href="#ClientesControlador-302"><span class="linenos">302</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span><span class="p">:</span>
</span><span id="ClientesControlador-303"><a href="#ClientesControlador-303"><span class="linenos">303</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span>
</span><span id="ClientesControlador-304"><a href="#ClientesControlador-304"><span class="linenos">304</span></a>                <span class="s2">&quot;Primero debes seleccionar un cliente para eliminar.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-305"><a href="#ClientesControlador-305"><span class="linenos">305</span></a>            <span class="k">return</span>
</span><span id="ClientesControlador-306"><a href="#ClientesControlador-306"><span class="linenos">306</span></a>
</span><span id="ClientesControlador-307"><a href="#ClientesControlador-307"><span class="linenos">307</span></a>        <span class="n">confirmacion</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span>
</span><span id="ClientesControlador-308"><a href="#ClientesControlador-308"><span class="linenos">308</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="p">,</span>
</span><span id="ClientesControlador-309"><a href="#ClientesControlador-309"><span class="linenos">309</span></a>            <span class="s2">&quot;Confirmar eliminación&quot;</span><span class="p">,</span>
</span><span id="ClientesControlador-310"><a href="#ClientesControlador-310"><span class="linenos">310</span></a>            <span class="s2">&quot;¿Estás seguro de que deseas eliminar este cliente?</span><span class="se">\n</span><span class="s2">Esta acción no eliminará sus reparaciones ni vehículos.&quot;</span><span class="p">,</span>
</span><span id="ClientesControlador-311"><a href="#ClientesControlador-311"><span class="linenos">311</span></a>            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span>
</span><span id="ClientesControlador-312"><a href="#ClientesControlador-312"><span class="linenos">312</span></a>        <span class="p">)</span>
</span><span id="ClientesControlador-313"><a href="#ClientesControlador-313"><span class="linenos">313</span></a>
</span><span id="ClientesControlador-314"><a href="#ClientesControlador-314"><span class="linenos">314</span></a>        <span class="k">if</span> <span class="n">confirmacion</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
</span><span id="ClientesControlador-315"><a href="#ClientesControlador-315"><span class="linenos">315</span></a>            <span class="kn">from</span><span class="w"> </span><span class="nn">modelos.clientes_consultas</span><span class="w"> </span><span class="kn">import</span> <span class="n">eliminar_cliente_por_id</span>
</span><span id="ClientesControlador-316"><a href="#ClientesControlador-316"><span class="linenos">316</span></a>
</span><span id="ClientesControlador-317"><a href="#ClientesControlador-317"><span class="linenos">317</span></a>            <span class="n">exito</span> <span class="o">=</span> <span class="n">eliminar_cliente_por_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span><span class="p">)</span>
</span><span id="ClientesControlador-318"><a href="#ClientesControlador-318"><span class="linenos">318</span></a>            <span class="k">if</span> <span class="n">exito</span><span class="p">:</span>
</span><span id="ClientesControlador-319"><a href="#ClientesControlador-319"><span class="linenos">319</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_info</span><span class="p">(</span><span class="s2">&quot;Cliente eliminado correctamente.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-320"><a href="#ClientesControlador-320"><span class="linenos">320</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">limpiar_campos</span><span class="p">()</span>
</span><span id="ClientesControlador-321"><a href="#ClientesControlador-321"><span class="linenos">321</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_nombre</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador-322"><a href="#ClientesControlador-322"><span class="linenos">322</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_dni</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador-323"><a href="#ClientesControlador-323"><span class="linenos">323</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_telefono</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador-324"><a href="#ClientesControlador-324"><span class="linenos">324</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_modificar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ClientesControlador-325"><a href="#ClientesControlador-325"><span class="linenos">325</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_eliminar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ClientesControlador-326"><a href="#ClientesControlador-326"><span class="linenos">326</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ClientesControlador-327"><a href="#ClientesControlador-327"><span class="linenos">327</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">lista_clientes</span> <span class="o">=</span> <span class="n">obtener_todos_los_clientes</span><span class="p">()</span>
</span><span id="ClientesControlador-328"><a href="#ClientesControlador-328"><span class="linenos">328</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ClientesControlador-329"><a href="#ClientesControlador-329"><span class="linenos">329</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;Error al eliminar el cliente.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador-330"><a href="#ClientesControlador-330"><span class="linenos">330</span></a>
</span><span id="ClientesControlador-331"><a href="#ClientesControlador-331"><span class="linenos">331</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">volver</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ClientesControlador-332"><a href="#ClientesControlador-332"><span class="linenos">332</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ClientesControlador-333"><a href="#ClientesControlador-333"><span class="linenos">333</span></a><span class="sd">        Cierra la ventana actual y regresa a la ventana anterior.</span>
</span><span id="ClientesControlador-334"><a href="#ClientesControlador-334"><span class="linenos">334</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ClientesControlador-335"><a href="#ClientesControlador-335"><span class="linenos">335</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="ClientesControlador-336"><a href="#ClientesControlador-336"><span class="linenos">336</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">()</span>
</span><span id="ClientesControlador-337"><a href="#ClientesControlador-337"><span class="linenos">337</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana_anterior</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></pre>
            </div>


            <div class="docstring">
                <p>QObject(self, parent: Optional[PySide6.QtCore.QObject] = None) -> None</p>
            </div>


            <div id="ClientesControlador.__init__" class="classattr">
                <input id="ClientesControlador.__init__-view-source" class="view-source-toggle-state" type="checkbox"
                    aria-hidden="true" tabindex="-1">
                <div class="attr function">

                    <span class="name">ClientesControlador</span><span class="signature pdoc-code condensed">(<span
                            class="param"><span class="n">ventana_anterior</span></span>)</span>

                    <label class="view-source-button" for="ClientesControlador.__init__-view-source"><span>View
                            Source</span></label>

                </div>
                <a class="headerlink" href="#ClientesControlador.__init__"></a>
                <div class="pdoc-code codehilite">
                    <pre><span></span><span id="ClientesControlador.__init__-31"><a href="#ClientesControlador.__init__-31"><span class="linenos">31</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ventana_anterior</span><span class="p">):</span>
</span><span id="ClientesControlador.__init__-32"><a href="#ClientesControlador.__init__-32"><span class="linenos">32</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ClientesControlador.__init__-33"><a href="#ClientesControlador.__init__-33"><span class="linenos">33</span></a><span class="sd">        Inicializa el controlador de clientes y configura eventos.</span>
</span><span id="ClientesControlador.__init__-34"><a href="#ClientesControlador.__init__-34"><span class="linenos">34</span></a>
</span><span id="ClientesControlador.__init__-35"><a href="#ClientesControlador.__init__-35"><span class="linenos">35</span></a><span class="sd">        Args:</span>
</span><span id="ClientesControlador.__init__-36"><a href="#ClientesControlador.__init__-36"><span class="linenos">36</span></a><span class="sd">            ventana_anterior: Ventana desde la que se abre este módulo (para volver).</span>
</span><span id="ClientesControlador.__init__-37"><a href="#ClientesControlador.__init__-37"><span class="linenos">37</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ClientesControlador.__init__-38"><a href="#ClientesControlador.__init__-38"><span class="linenos">38</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="ClientesControlador.__init__-39"><a href="#ClientesControlador.__init__-39"><span class="linenos">39</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;controlador_clientes&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-40"><a href="#ClientesControlador.__init__-40"><span class="linenos">40</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span> <span class="o">=</span> <span class="n">VentanaClientes</span><span class="p">()</span>
</span><span id="ClientesControlador.__init__-41"><a href="#ClientesControlador.__init__-41"><span class="linenos">41</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana_anterior</span> <span class="o">=</span> <span class="n">ventana_anterior</span>
</span><span id="ClientesControlador.__init__-42"><a href="#ClientesControlador.__init__-42"><span class="linenos">42</span></a>
</span><span id="ClientesControlador.__init__-43"><a href="#ClientesControlador.__init__-43"><span class="linenos">43</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_volver</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">volver</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-44"><a href="#ClientesControlador.__init__-44"><span class="linenos">44</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_limpiar</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limpiar_campos</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-45"><a href="#ClientesControlador.__init__-45"><span class="linenos">45</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_guardar</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">registrar_cliente</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-46"><a href="#ClientesControlador.__init__-46"><span class="linenos">46</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_modificar</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modificar_cliente</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-47"><a href="#ClientesControlador.__init__-47"><span class="linenos">47</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_modificar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-48"><a href="#ClientesControlador.__init__-48"><span class="linenos">48</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_eliminar</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eliminar_cliente</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-49"><a href="#ClientesControlador.__init__-49"><span class="linenos">49</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_eliminar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-50"><a href="#ClientesControlador.__init__-50"><span class="linenos">50</span></a>
</span><span id="ClientesControlador.__init__-51"><a href="#ClientesControlador.__init__-51"><span class="linenos">51</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">lista_clientes</span> <span class="o">=</span> <span class="n">obtener_todos_los_clientes</span><span class="p">()</span>
</span><span id="ClientesControlador.__init__-52"><a href="#ClientesControlador.__init__-52"><span class="linenos">52</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ClientesControlador.__init__-53"><a href="#ClientesControlador.__init__-53"><span class="linenos">53</span></a>
</span><span id="ClientesControlador.__init__-54"><a href="#ClientesControlador.__init__-54"><span class="linenos">54</span></a>        <span class="c1"># Diccionarios para búsquedas</span>
</span><span id="ClientesControlador.__init__-55"><a href="#ClientesControlador.__init__-55"><span class="linenos">55</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dict_nombres</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="ClientesControlador.__init__-56"><a href="#ClientesControlador.__init__-56"><span class="linenos">56</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dict_dnis</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="ClientesControlador.__init__-57"><a href="#ClientesControlador.__init__-57"><span class="linenos">57</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dict_telefonos</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="ClientesControlador.__init__-58"><a href="#ClientesControlador.__init__-58"><span class="linenos">58</span></a>
</span><span id="ClientesControlador.__init__-59"><a href="#ClientesControlador.__init__-59"><span class="linenos">59</span></a>        <span class="k">for</span> <span class="n">cliente</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lista_clientes</span><span class="p">:</span>
</span><span id="ClientesControlador.__init__-60"><a href="#ClientesControlador.__init__-60"><span class="linenos">60</span></a>            <span class="n">nombre_completo</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cliente</span><span class="p">[</span><span class="s1">&#39;nombre&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">cliente</span><span class="p">[</span><span class="s1">&#39;primer_apellido&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">cliente</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;segundo_apellido&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span>
</span><span id="ClientesControlador.__init__-61"><a href="#ClientesControlador.__init__-61"><span class="linenos">61</span></a>            <span class="p">)</span>
</span><span id="ClientesControlador.__init__-62"><a href="#ClientesControlador.__init__-62"><span class="linenos">62</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dict_nombres</span><span class="p">[</span><span class="n">nombre_completo</span><span class="p">]</span> <span class="o">=</span> <span class="n">cliente</span>
</span><span id="ClientesControlador.__init__-63"><a href="#ClientesControlador.__init__-63"><span class="linenos">63</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dict_dnis</span><span class="p">[</span><span class="n">cliente</span><span class="p">[</span><span class="s1">&#39;dni&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">cliente</span>
</span><span id="ClientesControlador.__init__-64"><a href="#ClientesControlador.__init__-64"><span class="linenos">64</span></a>            <span class="k">if</span> <span class="n">cliente</span><span class="p">[</span><span class="s1">&#39;telefono&#39;</span><span class="p">]:</span>
</span><span id="ClientesControlador.__init__-65"><a href="#ClientesControlador.__init__-65"><span class="linenos">65</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">dict_telefonos</span><span class="p">[</span><span class="n">cliente</span><span class="p">[</span><span class="s1">&#39;telefono&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">cliente</span>
</span><span id="ClientesControlador.__init__-66"><a href="#ClientesControlador.__init__-66"><span class="linenos">66</span></a>
</span><span id="ClientesControlador.__init__-67"><a href="#ClientesControlador.__init__-67"><span class="linenos">67</span></a>        <span class="c1"># Completers</span>
</span><span id="ClientesControlador.__init__-68"><a href="#ClientesControlador.__init__-68"><span class="linenos">68</span></a>        <span class="n">completer_nombre</span> <span class="o">=</span> <span class="n">QCompleter</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dict_nombres</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="ClientesControlador.__init__-69"><a href="#ClientesControlador.__init__-69"><span class="linenos">69</span></a>        <span class="n">completer_nombre</span><span class="o">.</span><span class="n">setCaseSensitivity</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">CaseInsensitive</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-70"><a href="#ClientesControlador.__init__-70"><span class="linenos">70</span></a>        <span class="n">completer_nombre</span><span class="o">.</span><span class="n">setFilterMode</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">MatchContains</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-71"><a href="#ClientesControlador.__init__-71"><span class="linenos">71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_nombre</span><span class="o">.</span><span class="n">setCompleter</span><span class="p">(</span><span class="n">completer_nombre</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-72"><a href="#ClientesControlador.__init__-72"><span class="linenos">72</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_nombre</span><span class="o">.</span><span class="n">installEventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-73"><a href="#ClientesControlador.__init__-73"><span class="linenos">73</span></a>
</span><span id="ClientesControlador.__init__-74"><a href="#ClientesControlador.__init__-74"><span class="linenos">74</span></a>        <span class="n">completer_dni</span> <span class="o">=</span> <span class="n">QCompleter</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dict_dnis</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="ClientesControlador.__init__-75"><a href="#ClientesControlador.__init__-75"><span class="linenos">75</span></a>        <span class="n">completer_dni</span><span class="o">.</span><span class="n">setCaseSensitivity</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">CaseInsensitive</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-76"><a href="#ClientesControlador.__init__-76"><span class="linenos">76</span></a>        <span class="n">completer_dni</span><span class="o">.</span><span class="n">setFilterMode</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">MatchContains</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-77"><a href="#ClientesControlador.__init__-77"><span class="linenos">77</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_dni</span><span class="o">.</span><span class="n">setCompleter</span><span class="p">(</span><span class="n">completer_dni</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-78"><a href="#ClientesControlador.__init__-78"><span class="linenos">78</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_dni</span><span class="o">.</span><span class="n">installEventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-79"><a href="#ClientesControlador.__init__-79"><span class="linenos">79</span></a>
</span><span id="ClientesControlador.__init__-80"><a href="#ClientesControlador.__init__-80"><span class="linenos">80</span></a>        <span class="n">completer_tel</span> <span class="o">=</span> <span class="n">QCompleter</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dict_telefonos</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="ClientesControlador.__init__-81"><a href="#ClientesControlador.__init__-81"><span class="linenos">81</span></a>        <span class="n">completer_tel</span><span class="o">.</span><span class="n">setCaseSensitivity</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">CaseInsensitive</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-82"><a href="#ClientesControlador.__init__-82"><span class="linenos">82</span></a>        <span class="n">completer_tel</span><span class="o">.</span><span class="n">setFilterMode</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">MatchContains</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-83"><a href="#ClientesControlador.__init__-83"><span class="linenos">83</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_telefono</span><span class="o">.</span><span class="n">setCompleter</span><span class="p">(</span><span class="n">completer_tel</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-84"><a href="#ClientesControlador.__init__-84"><span class="linenos">84</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_telefono</span><span class="o">.</span><span class="n">installEventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ClientesControlador.__init__-85"><a href="#ClientesControlador.__init__-85"><span class="linenos">85</span></a>
</span><span id="ClientesControlador.__init__-86"><a href="#ClientesControlador.__init__-86"><span class="linenos">86</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></pre>
                </div>


                <div class="docstring">
                    <p>Inicializa el controlador de clientes y configura eventos.</p>

                    <p>Args:
                        ventana_anterior: Ventana desde la que se abre este módulo (para volver).</p>
                </div>


            </div>
            <div id="ClientesControlador.ventana" class="classattr">
                <div class="attr variable">
                    <span class="name">ventana</span>


                </div>
                <a class="headerlink" href="#ClientesControlador.ventana"></a>



            </div>
            <div id="ClientesControlador.ventana_anterior" class="classattr">
                <div class="attr variable">
                    <span class="name">ventana_anterior</span>


                </div>
                <a class="headerlink" href="#ClientesControlador.ventana_anterior"></a>



            </div>
            <div id="ClientesControlador.lista_clientes" class="classattr">
                <div class="attr variable">
                    <span class="name">lista_clientes</span>


                </div>
                <a class="headerlink" href="#ClientesControlador.lista_clientes"></a>



            </div>
            <div id="ClientesControlador.cliente_seleccionado_id" class="classattr">
                <div class="attr variable">
                    <span class="name">cliente_seleccionado_id</span>


                </div>
                <a class="headerlink" href="#ClientesControlador.cliente_seleccionado_id"></a>



            </div>
            <div id="ClientesControlador.dict_nombres" class="classattr">
                <div class="attr variable">
                    <span class="name">dict_nombres</span>


                </div>
                <a class="headerlink" href="#ClientesControlador.dict_nombres"></a>



            </div>
            <div id="ClientesControlador.dict_dnis" class="classattr">
                <div class="attr variable">
                    <span class="name">dict_dnis</span>


                </div>
                <a class="headerlink" href="#ClientesControlador.dict_dnis"></a>



            </div>
            <div id="ClientesControlador.dict_telefonos" class="classattr">
                <div class="attr variable">
                    <span class="name">dict_telefonos</span>


                </div>
                <a class="headerlink" href="#ClientesControlador.dict_telefonos"></a>



            </div>
            <div id="ClientesControlador.eventFilter" class="classattr">
                <input id="ClientesControlador.eventFilter-view-source" class="view-source-toggle-state" type="checkbox"
                    aria-hidden="true" tabindex="-1">
                <div class="attr function">

                    <span class="def">def</span>
                    <span class="name">eventFilter</span><span class="signature pdoc-code condensed">(<span
                            class="param"><span class="bp">self</span>, </span><span class="param"><span
                                class="n">source</span>, </span><span class="param"><span
                                class="n">event</span></span><span class="return-annotation">):</span></span>

                    <label class="view-source-button" for="ClientesControlador.eventFilter-view-source"><span>View
                            Source</span></label>

                </div>
                <a class="headerlink" href="#ClientesControlador.eventFilter"></a>
                <div class="pdoc-code codehilite">
                    <pre><span></span><span id="ClientesControlador.eventFilter-88"><a href="#ClientesControlador.eventFilter-88"><span class="linenos"> 88</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">eventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="ClientesControlador.eventFilter-89"><a href="#ClientesControlador.eventFilter-89"><span class="linenos"> 89</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ClientesControlador.eventFilter-90"><a href="#ClientesControlador.eventFilter-90"><span class="linenos"> 90</span></a><span class="sd">        Captura la pulsación de Enter en los campos de búsqueda para autocompletar datos.</span>
</span><span id="ClientesControlador.eventFilter-91"><a href="#ClientesControlador.eventFilter-91"><span class="linenos"> 91</span></a>
</span><span id="ClientesControlador.eventFilter-92"><a href="#ClientesControlador.eventFilter-92"><span class="linenos"> 92</span></a><span class="sd">        Args:</span>
</span><span id="ClientesControlador.eventFilter-93"><a href="#ClientesControlador.eventFilter-93"><span class="linenos"> 93</span></a><span class="sd">            source: Campo de texto que emite el evento.</span>
</span><span id="ClientesControlador.eventFilter-94"><a href="#ClientesControlador.eventFilter-94"><span class="linenos"> 94</span></a><span class="sd">            event: Evento generado.</span>
</span><span id="ClientesControlador.eventFilter-95"><a href="#ClientesControlador.eventFilter-95"><span class="linenos"> 95</span></a>
</span><span id="ClientesControlador.eventFilter-96"><a href="#ClientesControlador.eventFilter-96"><span class="linenos"> 96</span></a><span class="sd">        Returns:</span>
</span><span id="ClientesControlador.eventFilter-97"><a href="#ClientesControlador.eventFilter-97"><span class="linenos"> 97</span></a><span class="sd">            bool: True si se gestiona el evento, False si se delega.</span>
</span><span id="ClientesControlador.eventFilter-98"><a href="#ClientesControlador.eventFilter-98"><span class="linenos"> 98</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ClientesControlador.eventFilter-99"><a href="#ClientesControlador.eventFilter-99"><span class="linenos"> 99</span></a>        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="n">QEvent</span><span class="o">.</span><span class="n">KeyPress</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Key_Return</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Enter</span><span class="p">):</span>
</span><span id="ClientesControlador.eventFilter-100"><a href="#ClientesControlador.eventFilter-100"><span class="linenos">100</span></a>            <span class="k">if</span> <span class="n">source</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_nombre</span><span class="p">:</span>
</span><span id="ClientesControlador.eventFilter-101"><a href="#ClientesControlador.eventFilter-101"><span class="linenos">101</span></a>                <span class="n">texto</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.eventFilter-102"><a href="#ClientesControlador.eventFilter-102"><span class="linenos">102</span></a>                <span class="n">cliente</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_nombres</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">texto</span><span class="p">)</span>
</span><span id="ClientesControlador.eventFilter-103"><a href="#ClientesControlador.eventFilter-103"><span class="linenos">103</span></a>                <span class="k">if</span> <span class="n">cliente</span><span class="p">:</span>
</span><span id="ClientesControlador.eventFilter-104"><a href="#ClientesControlador.eventFilter-104"><span class="linenos">104</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">rellenar_campos</span><span class="p">(</span><span class="n">cliente</span><span class="p">)</span>
</span><span id="ClientesControlador.eventFilter-105"><a href="#ClientesControlador.eventFilter-105"><span class="linenos">105</span></a>                    <span class="k">return</span> <span class="kc">True</span>
</span><span id="ClientesControlador.eventFilter-106"><a href="#ClientesControlador.eventFilter-106"><span class="linenos">106</span></a>            <span class="k">elif</span> <span class="n">source</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_dni</span><span class="p">:</span>
</span><span id="ClientesControlador.eventFilter-107"><a href="#ClientesControlador.eventFilter-107"><span class="linenos">107</span></a>                <span class="n">texto</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</span><span id="ClientesControlador.eventFilter-108"><a href="#ClientesControlador.eventFilter-108"><span class="linenos">108</span></a>                <span class="n">cliente</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_dnis</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">texto</span><span class="p">)</span>
</span><span id="ClientesControlador.eventFilter-109"><a href="#ClientesControlador.eventFilter-109"><span class="linenos">109</span></a>                <span class="k">if</span> <span class="n">cliente</span><span class="p">:</span>
</span><span id="ClientesControlador.eventFilter-110"><a href="#ClientesControlador.eventFilter-110"><span class="linenos">110</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">rellenar_campos</span><span class="p">(</span><span class="n">cliente</span><span class="p">)</span>
</span><span id="ClientesControlador.eventFilter-111"><a href="#ClientesControlador.eventFilter-111"><span class="linenos">111</span></a>                    <span class="k">return</span> <span class="kc">True</span>
</span><span id="ClientesControlador.eventFilter-112"><a href="#ClientesControlador.eventFilter-112"><span class="linenos">112</span></a>            <span class="k">elif</span> <span class="n">source</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_telefono</span><span class="p">:</span>
</span><span id="ClientesControlador.eventFilter-113"><a href="#ClientesControlador.eventFilter-113"><span class="linenos">113</span></a>                <span class="n">texto</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.eventFilter-114"><a href="#ClientesControlador.eventFilter-114"><span class="linenos">114</span></a>                <span class="n">cliente</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_telefonos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">texto</span><span class="p">)</span>
</span><span id="ClientesControlador.eventFilter-115"><a href="#ClientesControlador.eventFilter-115"><span class="linenos">115</span></a>                <span class="k">if</span> <span class="n">cliente</span><span class="p">:</span>
</span><span id="ClientesControlador.eventFilter-116"><a href="#ClientesControlador.eventFilter-116"><span class="linenos">116</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">rellenar_campos</span><span class="p">(</span><span class="n">cliente</span><span class="p">)</span>
</span><span id="ClientesControlador.eventFilter-117"><a href="#ClientesControlador.eventFilter-117"><span class="linenos">117</span></a>                    <span class="k">return</span> <span class="kc">True</span>
</span><span id="ClientesControlador.eventFilter-118"><a href="#ClientesControlador.eventFilter-118"><span class="linenos">118</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">eventFilter</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</span></pre>
                </div>


                <div class="docstring">
                    <p>Captura la pulsación de Enter en los campos de búsqueda para autocompletar datos.</p>

                    <p>Args:
                        source: Campo de texto que emite el evento.
                        event: Evento generado.</p>

                    <p>Returns:
                        bool: True si se gestiona el evento, False si se delega.</p>
                </div>


            </div>
            <div id="ClientesControlador.volver" class="classattr">
                <input id="ClientesControlador.volver-view-source" class="view-source-toggle-state" type="checkbox"
                    aria-hidden="true" tabindex="-1">
                <div class="attr function">

                    <span class="def">def</span>
                    <span class="name">volver</span><span class="signature pdoc-code condensed">(<span
                            class="param"><span class="bp">self</span></span><span
                            class="return-annotation">):</span></span>

                    <label class="view-source-button" for="ClientesControlador.volver-view-source"><span>View
                            Source</span></label>

                </div>
                <a class="headerlink" href="#ClientesControlador.volver"></a>
                <div class="pdoc-code codehilite">
                    <pre><span></span><span id="ClientesControlador.volver-331"><a href="#ClientesControlador.volver-331"><span class="linenos">331</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">volver</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ClientesControlador.volver-332"><a href="#ClientesControlador.volver-332"><span class="linenos">332</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ClientesControlador.volver-333"><a href="#ClientesControlador.volver-333"><span class="linenos">333</span></a><span class="sd">        Cierra la ventana actual y regresa a la ventana anterior.</span>
</span><span id="ClientesControlador.volver-334"><a href="#ClientesControlador.volver-334"><span class="linenos">334</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ClientesControlador.volver-335"><a href="#ClientesControlador.volver-335"><span class="linenos">335</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="ClientesControlador.volver-336"><a href="#ClientesControlador.volver-336"><span class="linenos">336</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">()</span>
</span><span id="ClientesControlador.volver-337"><a href="#ClientesControlador.volver-337"><span class="linenos">337</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana_anterior</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></pre>
                </div>


                <div class="docstring">
                    <p>Cierra la ventana actual y regresa a la ventana anterior.</p>
                </div>


            </div>
            <div id="ClientesControlador.limpiar_campos" class="classattr">
                <input id="ClientesControlador.limpiar_campos-view-source" class="view-source-toggle-state"
                    type="checkbox" aria-hidden="true" tabindex="-1">
                <div class="attr function">

                    <span class="def">def</span>
                    <span class="name">limpiar_campos</span><span class="signature pdoc-code condensed">(<span
                            class="param"><span class="bp">self</span></span><span
                            class="return-annotation">):</span></span>

                    <label class="view-source-button" for="ClientesControlador.limpiar_campos-view-source"><span>View
                            Source</span></label>

                </div>
                <a class="headerlink" href="#ClientesControlador.limpiar_campos"></a>
                <div class="pdoc-code codehilite">
                    <pre><span></span><span id="ClientesControlador.limpiar_campos-125"><a href="#ClientesControlador.limpiar_campos-125"><span class="linenos">125</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">limpiar_campos</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ClientesControlador.limpiar_campos-126"><a href="#ClientesControlador.limpiar_campos-126"><span class="linenos">126</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Limpia todos los campos del formulario de cliente.&quot;&quot;&quot;</span>
</span><span id="ClientesControlador.limpiar_campos-127"><a href="#ClientesControlador.limpiar_campos-127"><span class="linenos">127</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_nombre</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador.limpiar_campos-128"><a href="#ClientesControlador.limpiar_campos-128"><span class="linenos">128</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido1</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador.limpiar_campos-129"><a href="#ClientesControlador.limpiar_campos-129"><span class="linenos">129</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido2</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador.limpiar_campos-130"><a href="#ClientesControlador.limpiar_campos-130"><span class="linenos">130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_dni</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador.limpiar_campos-131"><a href="#ClientesControlador.limpiar_campos-131"><span class="linenos">131</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_telefono</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador.limpiar_campos-132"><a href="#ClientesControlador.limpiar_campos-132"><span class="linenos">132</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_email</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador.limpiar_campos-133"><a href="#ClientesControlador.limpiar_campos-133"><span class="linenos">133</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_direccion</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador.limpiar_campos-134"><a href="#ClientesControlador.limpiar_campos-134"><span class="linenos">134</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_cp</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador.limpiar_campos-135"><a href="#ClientesControlador.limpiar_campos-135"><span class="linenos">135</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_localidad</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador.limpiar_campos-136"><a href="#ClientesControlador.limpiar_campos-136"><span class="linenos">136</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_provincia</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador.limpiar_campos-137"><a href="#ClientesControlador.limpiar_campos-137"><span class="linenos">137</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_observaciones</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador.limpiar_campos-138"><a href="#ClientesControlador.limpiar_campos-138"><span class="linenos">138</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_nombre</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador.limpiar_campos-139"><a href="#ClientesControlador.limpiar_campos-139"><span class="linenos">139</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_dni</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador.limpiar_campos-140"><a href="#ClientesControlador.limpiar_campos-140"><span class="linenos">140</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_telefono</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador.limpiar_campos-141"><a href="#ClientesControlador.limpiar_campos-141"><span class="linenos">141</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_modificar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ClientesControlador.limpiar_campos-142"><a href="#ClientesControlador.limpiar_campos-142"><span class="linenos">142</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span> <span class="o">=</span> <span class="kc">None</span>
</span></pre>
                </div>


                <div class="docstring">
                    <p>Limpia todos los campos del formulario de cliente.</p>
                </div>


            </div>
            <div id="ClientesControlador.registrar_cliente" class="classattr">
                <input id="ClientesControlador.registrar_cliente-view-source" class="view-source-toggle-state"
                    type="checkbox" aria-hidden="true" tabindex="-1">
                <div class="attr function">

                    <span class="def">def</span>
                    <span class="name">registrar_cliente</span><span class="signature pdoc-code condensed">(<span
                            class="param"><span class="bp">self</span></span><span
                            class="return-annotation">):</span></span>

                    <label class="view-source-button" for="ClientesControlador.registrar_cliente-view-source"><span>View
                            Source</span></label>

                </div>
                <a class="headerlink" href="#ClientesControlador.registrar_cliente"></a>
                <div class="pdoc-code codehilite">
                    <pre><span></span><span id="ClientesControlador.registrar_cliente-144"><a href="#ClientesControlador.registrar_cliente-144"><span class="linenos">144</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">registrar_cliente</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ClientesControlador.registrar_cliente-145"><a href="#ClientesControlador.registrar_cliente-145"><span class="linenos">145</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ClientesControlador.registrar_cliente-146"><a href="#ClientesControlador.registrar_cliente-146"><span class="linenos">146</span></a><span class="sd">        Valida e inserta un nuevo cliente en la base de datos.</span>
</span><span id="ClientesControlador.registrar_cliente-147"><a href="#ClientesControlador.registrar_cliente-147"><span class="linenos">147</span></a>
</span><span id="ClientesControlador.registrar_cliente-148"><a href="#ClientesControlador.registrar_cliente-148"><span class="linenos">148</span></a><span class="sd">        Requiere como obligatorios: nombre, primer apellido y DNI.</span>
</span><span id="ClientesControlador.registrar_cliente-149"><a href="#ClientesControlador.registrar_cliente-149"><span class="linenos">149</span></a><span class="sd">        Verifica la validez del DNI y el formato de correo si se indica.</span>
</span><span id="ClientesControlador.registrar_cliente-150"><a href="#ClientesControlador.registrar_cliente-150"><span class="linenos">150</span></a><span class="sd">        Previene duplicados por DNI.</span>
</span><span id="ClientesControlador.registrar_cliente-151"><a href="#ClientesControlador.registrar_cliente-151"><span class="linenos">151</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ClientesControlador.registrar_cliente-152"><a href="#ClientesControlador.registrar_cliente-152"><span class="linenos">152</span></a>        <span class="n">nombre</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_nombre</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.registrar_cliente-153"><a href="#ClientesControlador.registrar_cliente-153"><span class="linenos">153</span></a>        <span class="n">apellido1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido1</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.registrar_cliente-154"><a href="#ClientesControlador.registrar_cliente-154"><span class="linenos">154</span></a>        <span class="n">apellido2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido2</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.registrar_cliente-155"><a href="#ClientesControlador.registrar_cliente-155"><span class="linenos">155</span></a>        <span class="n">dni</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_dni</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.registrar_cliente-156"><a href="#ClientesControlador.registrar_cliente-156"><span class="linenos">156</span></a>        <span class="n">telefono</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_telefono</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.registrar_cliente-157"><a href="#ClientesControlador.registrar_cliente-157"><span class="linenos">157</span></a>        <span class="n">email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_email</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.registrar_cliente-158"><a href="#ClientesControlador.registrar_cliente-158"><span class="linenos">158</span></a>        <span class="n">direccion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_direccion</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.registrar_cliente-159"><a href="#ClientesControlador.registrar_cliente-159"><span class="linenos">159</span></a>        <span class="n">cp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_cp</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.registrar_cliente-160"><a href="#ClientesControlador.registrar_cliente-160"><span class="linenos">160</span></a>        <span class="n">localidad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_localidad</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.registrar_cliente-161"><a href="#ClientesControlador.registrar_cliente-161"><span class="linenos">161</span></a>        <span class="n">provincia</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_provincia</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.registrar_cliente-162"><a href="#ClientesControlador.registrar_cliente-162"><span class="linenos">162</span></a>        <span class="n">observaciones</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_observaciones</span><span class="o">.</span><span class="n">toPlainText</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.registrar_cliente-163"><a href="#ClientesControlador.registrar_cliente-163"><span class="linenos">163</span></a>
</span><span id="ClientesControlador.registrar_cliente-164"><a href="#ClientesControlador.registrar_cliente-164"><span class="linenos">164</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">nombre</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">apellido1</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">dni</span><span class="p">:</span>
</span><span id="ClientesControlador.registrar_cliente-165"><a href="#ClientesControlador.registrar_cliente-165"><span class="linenos">165</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span>
</span><span id="ClientesControlador.registrar_cliente-166"><a href="#ClientesControlador.registrar_cliente-166"><span class="linenos">166</span></a>                <span class="s2">&quot;Nombre, primer apellido y DNI son obligatorios.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.registrar_cliente-167"><a href="#ClientesControlador.registrar_cliente-167"><span class="linenos">167</span></a>            <span class="k">return</span>
</span><span id="ClientesControlador.registrar_cliente-168"><a href="#ClientesControlador.registrar_cliente-168"><span class="linenos">168</span></a>
</span><span id="ClientesControlador.registrar_cliente-169"><a href="#ClientesControlador.registrar_cliente-169"><span class="linenos">169</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">DNIUtils</span><span class="o">.</span><span class="n">validar_dni</span><span class="p">(</span><span class="n">dni</span><span class="p">):</span>
</span><span id="ClientesControlador.registrar_cliente-170"><a href="#ClientesControlador.registrar_cliente-170"><span class="linenos">170</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;El DNI introducido no es válido.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.registrar_cliente-171"><a href="#ClientesControlador.registrar_cliente-171"><span class="linenos">171</span></a>            <span class="k">return</span>
</span><span id="ClientesControlador.registrar_cliente-172"><a href="#ClientesControlador.registrar_cliente-172"><span class="linenos">172</span></a>
</span><span id="ClientesControlador.registrar_cliente-173"><a href="#ClientesControlador.registrar_cliente-173"><span class="linenos">173</span></a>        <span class="k">if</span> <span class="n">email</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">validar_email</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
</span><span id="ClientesControlador.registrar_cliente-174"><a href="#ClientesControlador.registrar_cliente-174"><span class="linenos">174</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span>
</span><span id="ClientesControlador.registrar_cliente-175"><a href="#ClientesControlador.registrar_cliente-175"><span class="linenos">175</span></a>                <span class="s2">&quot;El correo electrónico no tiene un formato válido.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.registrar_cliente-176"><a href="#ClientesControlador.registrar_cliente-176"><span class="linenos">176</span></a>            <span class="k">return</span>
</span><span id="ClientesControlador.registrar_cliente-177"><a href="#ClientesControlador.registrar_cliente-177"><span class="linenos">177</span></a>
</span><span id="ClientesControlador.registrar_cliente-178"><a href="#ClientesControlador.registrar_cliente-178"><span class="linenos">178</span></a>        <span class="k">if</span> <span class="n">dni_ya_existe</span><span class="p">(</span><span class="n">dni</span><span class="p">):</span>
</span><span id="ClientesControlador.registrar_cliente-179"><a href="#ClientesControlador.registrar_cliente-179"><span class="linenos">179</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;Ya existe un cliente con ese DNI.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.registrar_cliente-180"><a href="#ClientesControlador.registrar_cliente-180"><span class="linenos">180</span></a>            <span class="k">return</span>
</span><span id="ClientesControlador.registrar_cliente-181"><a href="#ClientesControlador.registrar_cliente-181"><span class="linenos">181</span></a>
</span><span id="ClientesControlador.registrar_cliente-182"><a href="#ClientesControlador.registrar_cliente-182"><span class="linenos">182</span></a>        <span class="n">exito</span> <span class="o">=</span> <span class="n">crear_cliente</span><span class="p">(</span>
</span><span id="ClientesControlador.registrar_cliente-183"><a href="#ClientesControlador.registrar_cliente-183"><span class="linenos">183</span></a>            <span class="n">nombre</span><span class="p">,</span> <span class="n">apellido1</span><span class="p">,</span> <span class="n">apellido2</span><span class="p">,</span> <span class="n">dni</span><span class="p">,</span> <span class="n">telefono</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span>
</span><span id="ClientesControlador.registrar_cliente-184"><a href="#ClientesControlador.registrar_cliente-184"><span class="linenos">184</span></a>            <span class="n">direccion</span><span class="p">,</span> <span class="n">cp</span><span class="p">,</span> <span class="n">localidad</span><span class="p">,</span> <span class="n">provincia</span><span class="p">,</span> <span class="n">observaciones</span>
</span><span id="ClientesControlador.registrar_cliente-185"><a href="#ClientesControlador.registrar_cliente-185"><span class="linenos">185</span></a>        <span class="p">)</span>
</span><span id="ClientesControlador.registrar_cliente-186"><a href="#ClientesControlador.registrar_cliente-186"><span class="linenos">186</span></a>
</span><span id="ClientesControlador.registrar_cliente-187"><a href="#ClientesControlador.registrar_cliente-187"><span class="linenos">187</span></a>        <span class="k">if</span> <span class="n">exito</span><span class="p">:</span>
</span><span id="ClientesControlador.registrar_cliente-188"><a href="#ClientesControlador.registrar_cliente-188"><span class="linenos">188</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_info</span><span class="p">(</span><span class="s2">&quot;Cliente registrado correctamente.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.registrar_cliente-189"><a href="#ClientesControlador.registrar_cliente-189"><span class="linenos">189</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">limpiar_campos</span><span class="p">()</span>
</span><span id="ClientesControlador.registrar_cliente-190"><a href="#ClientesControlador.registrar_cliente-190"><span class="linenos">190</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ClientesControlador.registrar_cliente-191"><a href="#ClientesControlador.registrar_cliente-191"><span class="linenos">191</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;Ocurrió un error al registrar el cliente.&quot;</span><span class="p">)</span>
</span></pre>
                </div>


                <div class="docstring">
                    <p>Valida e inserta un nuevo cliente en la base de datos.</p>

                    <p>Requiere como obligatorios: nombre, primer apellido y DNI.
                        Verifica la validez del DNI y el formato de correo si se indica.
                        Previene duplicados por DNI.</p>
                </div>


            </div>
            <div id="ClientesControlador.rellenar_campos" class="classattr">
                <input id="ClientesControlador.rellenar_campos-view-source" class="view-source-toggle-state"
                    type="checkbox" aria-hidden="true" tabindex="-1">
                <div class="attr function">

                    <span class="def">def</span>
                    <span class="name">rellenar_campos</span><span class="signature pdoc-code condensed">(<span
                            class="param"><span class="bp">self</span>, </span><span class="param"><span
                                class="n">cliente</span></span><span class="return-annotation">):</span></span>

                    <label class="view-source-button" for="ClientesControlador.rellenar_campos-view-source"><span>View
                            Source</span></label>

                </div>
                <a class="headerlink" href="#ClientesControlador.rellenar_campos"></a>
                <div class="pdoc-code codehilite">
                    <pre><span></span><span id="ClientesControlador.rellenar_campos-193"><a href="#ClientesControlador.rellenar_campos-193"><span class="linenos">193</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">rellenar_campos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cliente</span><span class="p">):</span>
</span><span id="ClientesControlador.rellenar_campos-194"><a href="#ClientesControlador.rellenar_campos-194"><span class="linenos">194</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ClientesControlador.rellenar_campos-195"><a href="#ClientesControlador.rellenar_campos-195"><span class="linenos">195</span></a><span class="sd">        Rellena el formulario con los datos de un cliente existente.</span>
</span><span id="ClientesControlador.rellenar_campos-196"><a href="#ClientesControlador.rellenar_campos-196"><span class="linenos">196</span></a>
</span><span id="ClientesControlador.rellenar_campos-197"><a href="#ClientesControlador.rellenar_campos-197"><span class="linenos">197</span></a><span class="sd">        Args:</span>
</span><span id="ClientesControlador.rellenar_campos-198"><a href="#ClientesControlador.rellenar_campos-198"><span class="linenos">198</span></a><span class="sd">            cliente (dict): Diccionario con datos del cliente.</span>
</span><span id="ClientesControlador.rellenar_campos-199"><a href="#ClientesControlador.rellenar_campos-199"><span class="linenos">199</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ClientesControlador.rellenar_campos-200"><a href="#ClientesControlador.rellenar_campos-200"><span class="linenos">200</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span> <span class="o">=</span> <span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
</span><span id="ClientesControlador.rellenar_campos-201"><a href="#ClientesControlador.rellenar_campos-201"><span class="linenos">201</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_modificar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ClientesControlador.rellenar_campos-202"><a href="#ClientesControlador.rellenar_campos-202"><span class="linenos">202</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_eliminar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ClientesControlador.rellenar_campos-203"><a href="#ClientesControlador.rellenar_campos-203"><span class="linenos">203</span></a>
</span><span id="ClientesControlador.rellenar_campos-204"><a href="#ClientesControlador.rellenar_campos-204"><span class="linenos">204</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_nombre</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;nombre&quot;</span><span class="p">])</span>
</span><span id="ClientesControlador.rellenar_campos-205"><a href="#ClientesControlador.rellenar_campos-205"><span class="linenos">205</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido1</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;primer_apellido&quot;</span><span class="p">])</span>
</span><span id="ClientesControlador.rellenar_campos-206"><a href="#ClientesControlador.rellenar_campos-206"><span class="linenos">206</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido2</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;segundo_apellido&quot;</span><span class="p">])</span>
</span><span id="ClientesControlador.rellenar_campos-207"><a href="#ClientesControlador.rellenar_campos-207"><span class="linenos">207</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_dni</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;dni&quot;</span><span class="p">])</span>
</span><span id="ClientesControlador.rellenar_campos-208"><a href="#ClientesControlador.rellenar_campos-208"><span class="linenos">208</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_telefono</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;telefono&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.rellenar_campos-209"><a href="#ClientesControlador.rellenar_campos-209"><span class="linenos">209</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_email</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;email&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.rellenar_campos-210"><a href="#ClientesControlador.rellenar_campos-210"><span class="linenos">210</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_direccion</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;direccion&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.rellenar_campos-211"><a href="#ClientesControlador.rellenar_campos-211"><span class="linenos">211</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_cp</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;codigo_postal&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.rellenar_campos-212"><a href="#ClientesControlador.rellenar_campos-212"><span class="linenos">212</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_localidad</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;localidad&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.rellenar_campos-213"><a href="#ClientesControlador.rellenar_campos-213"><span class="linenos">213</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_provincia</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;provincia&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.rellenar_campos-214"><a href="#ClientesControlador.rellenar_campos-214"><span class="linenos">214</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_observaciones</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
</span><span id="ClientesControlador.rellenar_campos-215"><a href="#ClientesControlador.rellenar_campos-215"><span class="linenos">215</span></a>            <span class="n">cliente</span><span class="p">[</span><span class="s2">&quot;observaciones&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span></pre>
                </div>


                <div class="docstring">
                    <p>Rellena el formulario con los datos de un cliente existente.</p>

                    <p>Args:
                        cliente (dict): Diccionario con datos del cliente.</p>
                </div>


            </div>
            <div id="ClientesControlador.validar_email" class="classattr">
                <input id="ClientesControlador.validar_email-view-source" class="view-source-toggle-state"
                    type="checkbox" aria-hidden="true" tabindex="-1">
                <div class="attr function">

                    <span class="def">def</span>
                    <span class="name">validar_email</span><span class="signature pdoc-code condensed">(<span
                            class="param"><span class="bp">self</span>, </span><span class="param"><span
                                class="n">email</span></span><span class="return-annotation">):</span></span>

                    <label class="view-source-button" for="ClientesControlador.validar_email-view-source"><span>View
                            Source</span></label>

                </div>
                <a class="headerlink" href="#ClientesControlador.validar_email"></a>
                <div class="pdoc-code codehilite">
                    <pre><span></span><span id="ClientesControlador.validar_email-217"><a href="#ClientesControlador.validar_email-217"><span class="linenos">217</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">validar_email</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
</span><span id="ClientesControlador.validar_email-218"><a href="#ClientesControlador.validar_email-218"><span class="linenos">218</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ClientesControlador.validar_email-219"><a href="#ClientesControlador.validar_email-219"><span class="linenos">219</span></a><span class="sd">        Comprueba si el email tiene un formato válido.</span>
</span><span id="ClientesControlador.validar_email-220"><a href="#ClientesControlador.validar_email-220"><span class="linenos">220</span></a>
</span><span id="ClientesControlador.validar_email-221"><a href="#ClientesControlador.validar_email-221"><span class="linenos">221</span></a><span class="sd">        Args:</span>
</span><span id="ClientesControlador.validar_email-222"><a href="#ClientesControlador.validar_email-222"><span class="linenos">222</span></a><span class="sd">            email (str): Dirección a validar.</span>
</span><span id="ClientesControlador.validar_email-223"><a href="#ClientesControlador.validar_email-223"><span class="linenos">223</span></a>
</span><span id="ClientesControlador.validar_email-224"><a href="#ClientesControlador.validar_email-224"><span class="linenos">224</span></a><span class="sd">        Returns:</span>
</span><span id="ClientesControlador.validar_email-225"><a href="#ClientesControlador.validar_email-225"><span class="linenos">225</span></a><span class="sd">            bool: True si es válido, False en caso contrario.</span>
</span><span id="ClientesControlador.validar_email-226"><a href="#ClientesControlador.validar_email-226"><span class="linenos">226</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ClientesControlador.validar_email-227"><a href="#ClientesControlador.validar_email-227"><span class="linenos">227</span></a>        <span class="n">patron</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;^[\w\.-]+@[\w\.-]+\.\w+$&#39;</span>
</span><span id="ClientesControlador.validar_email-228"><a href="#ClientesControlador.validar_email-228"><span class="linenos">228</span></a>        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">patron</span><span class="p">,</span> <span class="n">email</span><span class="p">)</span>
</span></pre>
                </div>


                <div class="docstring">
                    <p>Comprueba si el email tiene un formato válido.</p>

                    <p>Args:
                        email (str): Dirección a validar.</p>

                    <p>Returns:
                        bool: True si es válido, False en caso contrario.</p>
                </div>


            </div>
            <div id="ClientesControlador.mostrar_error" class="classattr">
                <input id="ClientesControlador.mostrar_error-view-source" class="view-source-toggle-state"
                    type="checkbox" aria-hidden="true" tabindex="-1">
                <div class="attr function">

                    <span class="def">def</span>
                    <span class="name">mostrar_error</span><span class="signature pdoc-code condensed">(<span
                            class="param"><span class="bp">self</span>, </span><span class="param"><span
                                class="n">mensaje</span></span><span class="return-annotation">):</span></span>

                    <label class="view-source-button" for="ClientesControlador.mostrar_error-view-source"><span>View
                            Source</span></label>

                </div>
                <a class="headerlink" href="#ClientesControlador.mostrar_error"></a>
                <div class="pdoc-code codehilite">
                    <pre><span></span><span id="ClientesControlador.mostrar_error-230"><a href="#ClientesControlador.mostrar_error-230"><span class="linenos">230</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mostrar_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mensaje</span><span class="p">):</span>
</span><span id="ClientesControlador.mostrar_error-231"><a href="#ClientesControlador.mostrar_error-231"><span class="linenos">231</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Muestra un cuadro de error con el mensaje especificado.&quot;&quot;&quot;</span>
</span><span id="ClientesControlador.mostrar_error-232"><a href="#ClientesControlador.mostrar_error-232"><span class="linenos">232</span></a>        <span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="n">mensaje</span><span class="p">)</span>
</span></pre>
                </div>


                <div class="docstring">
                    <p>Muestra un cuadro de error con el mensaje especificado.</p>
                </div>


            </div>
            <div id="ClientesControlador.mostrar_info" class="classattr">
                <input id="ClientesControlador.mostrar_info-view-source" class="view-source-toggle-state"
                    type="checkbox" aria-hidden="true" tabindex="-1">
                <div class="attr function">

                    <span class="def">def</span>
                    <span class="name">mostrar_info</span><span class="signature pdoc-code condensed">(<span
                            class="param"><span class="bp">self</span>, </span><span class="param"><span
                                class="n">mensaje</span></span><span class="return-annotation">):</span></span>

                    <label class="view-source-button" for="ClientesControlador.mostrar_info-view-source"><span>View
                            Source</span></label>

                </div>
                <a class="headerlink" href="#ClientesControlador.mostrar_info"></a>
                <div class="pdoc-code codehilite">
                    <pre><span></span><span id="ClientesControlador.mostrar_info-234"><a href="#ClientesControlador.mostrar_info-234"><span class="linenos">234</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mostrar_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mensaje</span><span class="p">):</span>
</span><span id="ClientesControlador.mostrar_info-235"><a href="#ClientesControlador.mostrar_info-235"><span class="linenos">235</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Muestra un cuadro informativo con el mensaje especificado.&quot;&quot;&quot;</span>
</span><span id="ClientesControlador.mostrar_info-236"><a href="#ClientesControlador.mostrar_info-236"><span class="linenos">236</span></a>        <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="p">,</span> <span class="s2">&quot;Información&quot;</span><span class="p">,</span> <span class="n">mensaje</span><span class="p">)</span>
</span></pre>
                </div>


                <div class="docstring">
                    <p>Muestra un cuadro informativo con el mensaje especificado.</p>
                </div>


            </div>
            <div id="ClientesControlador.modificar_cliente" class="classattr">
                <input id="ClientesControlador.modificar_cliente-view-source" class="view-source-toggle-state"
                    type="checkbox" aria-hidden="true" tabindex="-1">
                <div class="attr function">

                    <span class="def">def</span>
                    <span class="name">modificar_cliente</span><span class="signature pdoc-code condensed">(<span
                            class="param"><span class="bp">self</span></span><span
                            class="return-annotation">):</span></span>

                    <label class="view-source-button" for="ClientesControlador.modificar_cliente-view-source"><span>View
                            Source</span></label>

                </div>
                <a class="headerlink" href="#ClientesControlador.modificar_cliente"></a>
                <div class="pdoc-code codehilite">
                    <pre><span></span><span id="ClientesControlador.modificar_cliente-238"><a href="#ClientesControlador.modificar_cliente-238"><span class="linenos">238</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">modificar_cliente</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ClientesControlador.modificar_cliente-239"><a href="#ClientesControlador.modificar_cliente-239"><span class="linenos">239</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ClientesControlador.modificar_cliente-240"><a href="#ClientesControlador.modificar_cliente-240"><span class="linenos">240</span></a><span class="sd">        Permite actualizar los datos de un cliente ya registrado.</span>
</span><span id="ClientesControlador.modificar_cliente-241"><a href="#ClientesControlador.modificar_cliente-241"><span class="linenos">241</span></a>
</span><span id="ClientesControlador.modificar_cliente-242"><a href="#ClientesControlador.modificar_cliente-242"><span class="linenos">242</span></a><span class="sd">        Valida el nuevo DNI si se cambia y comprueba posibles duplicados.</span>
</span><span id="ClientesControlador.modificar_cliente-243"><a href="#ClientesControlador.modificar_cliente-243"><span class="linenos">243</span></a><span class="sd">        Valida el formato del correo electrónico.</span>
</span><span id="ClientesControlador.modificar_cliente-244"><a href="#ClientesControlador.modificar_cliente-244"><span class="linenos">244</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ClientesControlador.modificar_cliente-245"><a href="#ClientesControlador.modificar_cliente-245"><span class="linenos">245</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span><span class="p">:</span>
</span><span id="ClientesControlador.modificar_cliente-246"><a href="#ClientesControlador.modificar_cliente-246"><span class="linenos">246</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span>
</span><span id="ClientesControlador.modificar_cliente-247"><a href="#ClientesControlador.modificar_cliente-247"><span class="linenos">247</span></a>                <span class="s2">&quot;Primero debes buscar y seleccionar un cliente.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.modificar_cliente-248"><a href="#ClientesControlador.modificar_cliente-248"><span class="linenos">248</span></a>            <span class="k">return</span>
</span><span id="ClientesControlador.modificar_cliente-249"><a href="#ClientesControlador.modificar_cliente-249"><span class="linenos">249</span></a>
</span><span id="ClientesControlador.modificar_cliente-250"><a href="#ClientesControlador.modificar_cliente-250"><span class="linenos">250</span></a>        <span class="n">nombre</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_nombre</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.modificar_cliente-251"><a href="#ClientesControlador.modificar_cliente-251"><span class="linenos">251</span></a>        <span class="n">apellido1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido1</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.modificar_cliente-252"><a href="#ClientesControlador.modificar_cliente-252"><span class="linenos">252</span></a>        <span class="n">apellido2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_apellido2</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.modificar_cliente-253"><a href="#ClientesControlador.modificar_cliente-253"><span class="linenos">253</span></a>        <span class="n">dni</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_dni</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.modificar_cliente-254"><a href="#ClientesControlador.modificar_cliente-254"><span class="linenos">254</span></a>        <span class="n">telefono</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_telefono</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.modificar_cliente-255"><a href="#ClientesControlador.modificar_cliente-255"><span class="linenos">255</span></a>        <span class="n">email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_email</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.modificar_cliente-256"><a href="#ClientesControlador.modificar_cliente-256"><span class="linenos">256</span></a>        <span class="n">direccion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_direccion</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.modificar_cliente-257"><a href="#ClientesControlador.modificar_cliente-257"><span class="linenos">257</span></a>        <span class="n">cp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_cp</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.modificar_cliente-258"><a href="#ClientesControlador.modificar_cliente-258"><span class="linenos">258</span></a>        <span class="n">localidad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_localidad</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.modificar_cliente-259"><a href="#ClientesControlador.modificar_cliente-259"><span class="linenos">259</span></a>        <span class="n">provincia</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_provincia</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.modificar_cliente-260"><a href="#ClientesControlador.modificar_cliente-260"><span class="linenos">260</span></a>        <span class="n">observaciones</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_observaciones</span><span class="o">.</span><span class="n">toPlainText</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ClientesControlador.modificar_cliente-261"><a href="#ClientesControlador.modificar_cliente-261"><span class="linenos">261</span></a>
</span><span id="ClientesControlador.modificar_cliente-262"><a href="#ClientesControlador.modificar_cliente-262"><span class="linenos">262</span></a>        <span class="n">cliente_original</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
</span><span id="ClientesControlador.modificar_cliente-263"><a href="#ClientesControlador.modificar_cliente-263"><span class="linenos">263</span></a>            <span class="p">(</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lista_clientes</span> <span class="k">if</span> <span class="n">c</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="ClientesControlador.modificar_cliente-264"><a href="#ClientesControlador.modificar_cliente-264"><span class="linenos">264</span></a>
</span><span id="ClientesControlador.modificar_cliente-265"><a href="#ClientesControlador.modificar_cliente-265"><span class="linenos">265</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">cliente_original</span><span class="p">:</span>
</span><span id="ClientesControlador.modificar_cliente-266"><a href="#ClientesControlador.modificar_cliente-266"><span class="linenos">266</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;No se ha podido obtener el cliente original.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.modificar_cliente-267"><a href="#ClientesControlador.modificar_cliente-267"><span class="linenos">267</span></a>            <span class="k">return</span>
</span><span id="ClientesControlador.modificar_cliente-268"><a href="#ClientesControlador.modificar_cliente-268"><span class="linenos">268</span></a>
</span><span id="ClientesControlador.modificar_cliente-269"><a href="#ClientesControlador.modificar_cliente-269"><span class="linenos">269</span></a>        <span class="n">dni_original</span> <span class="o">=</span> <span class="n">cliente_original</span><span class="p">[</span><span class="s2">&quot;dni&quot;</span><span class="p">]</span>
</span><span id="ClientesControlador.modificar_cliente-270"><a href="#ClientesControlador.modificar_cliente-270"><span class="linenos">270</span></a>
</span><span id="ClientesControlador.modificar_cliente-271"><a href="#ClientesControlador.modificar_cliente-271"><span class="linenos">271</span></a>        <span class="k">if</span> <span class="n">dni</span> <span class="o">!=</span> <span class="n">dni_original</span><span class="p">:</span>
</span><span id="ClientesControlador.modificar_cliente-272"><a href="#ClientesControlador.modificar_cliente-272"><span class="linenos">272</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">DNIUtils</span><span class="o">.</span><span class="n">validar_dni</span><span class="p">(</span><span class="n">dni</span><span class="p">):</span>
</span><span id="ClientesControlador.modificar_cliente-273"><a href="#ClientesControlador.modificar_cliente-273"><span class="linenos">273</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;El DNI introducido no es válido.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.modificar_cliente-274"><a href="#ClientesControlador.modificar_cliente-274"><span class="linenos">274</span></a>                <span class="k">return</span>
</span><span id="ClientesControlador.modificar_cliente-275"><a href="#ClientesControlador.modificar_cliente-275"><span class="linenos">275</span></a>            <span class="k">if</span> <span class="n">dni_ya_existe</span><span class="p">(</span><span class="n">dni</span><span class="p">):</span>
</span><span id="ClientesControlador.modificar_cliente-276"><a href="#ClientesControlador.modificar_cliente-276"><span class="linenos">276</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;Ya existe un cliente con ese DNI.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.modificar_cliente-277"><a href="#ClientesControlador.modificar_cliente-277"><span class="linenos">277</span></a>                <span class="k">return</span>
</span><span id="ClientesControlador.modificar_cliente-278"><a href="#ClientesControlador.modificar_cliente-278"><span class="linenos">278</span></a>
</span><span id="ClientesControlador.modificar_cliente-279"><a href="#ClientesControlador.modificar_cliente-279"><span class="linenos">279</span></a>        <span class="k">if</span> <span class="n">email</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">validar_email</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
</span><span id="ClientesControlador.modificar_cliente-280"><a href="#ClientesControlador.modificar_cliente-280"><span class="linenos">280</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span>
</span><span id="ClientesControlador.modificar_cliente-281"><a href="#ClientesControlador.modificar_cliente-281"><span class="linenos">281</span></a>                <span class="s2">&quot;El correo electrónico no tiene un formato válido.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.modificar_cliente-282"><a href="#ClientesControlador.modificar_cliente-282"><span class="linenos">282</span></a>            <span class="k">return</span>
</span><span id="ClientesControlador.modificar_cliente-283"><a href="#ClientesControlador.modificar_cliente-283"><span class="linenos">283</span></a>
</span><span id="ClientesControlador.modificar_cliente-284"><a href="#ClientesControlador.modificar_cliente-284"><span class="linenos">284</span></a>        <span class="n">exito</span> <span class="o">=</span> <span class="n">actualizar_cliente</span><span class="p">(</span>
</span><span id="ClientesControlador.modificar_cliente-285"><a href="#ClientesControlador.modificar_cliente-285"><span class="linenos">285</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span><span class="p">,</span>
</span><span id="ClientesControlador.modificar_cliente-286"><a href="#ClientesControlador.modificar_cliente-286"><span class="linenos">286</span></a>            <span class="n">nombre</span><span class="p">,</span> <span class="n">apellido1</span><span class="p">,</span> <span class="n">apellido2</span><span class="p">,</span> <span class="n">dni</span><span class="p">,</span> <span class="n">telefono</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span>
</span><span id="ClientesControlador.modificar_cliente-287"><a href="#ClientesControlador.modificar_cliente-287"><span class="linenos">287</span></a>            <span class="n">direccion</span><span class="p">,</span> <span class="n">cp</span><span class="p">,</span> <span class="n">localidad</span><span class="p">,</span> <span class="n">provincia</span><span class="p">,</span> <span class="n">observaciones</span>
</span><span id="ClientesControlador.modificar_cliente-288"><a href="#ClientesControlador.modificar_cliente-288"><span class="linenos">288</span></a>        <span class="p">)</span>
</span><span id="ClientesControlador.modificar_cliente-289"><a href="#ClientesControlador.modificar_cliente-289"><span class="linenos">289</span></a>
</span><span id="ClientesControlador.modificar_cliente-290"><a href="#ClientesControlador.modificar_cliente-290"><span class="linenos">290</span></a>        <span class="k">if</span> <span class="n">exito</span><span class="p">:</span>
</span><span id="ClientesControlador.modificar_cliente-291"><a href="#ClientesControlador.modificar_cliente-291"><span class="linenos">291</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_info</span><span class="p">(</span><span class="s2">&quot;Cliente modificado correctamente.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.modificar_cliente-292"><a href="#ClientesControlador.modificar_cliente-292"><span class="linenos">292</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">limpiar_campos</span><span class="p">()</span>
</span><span id="ClientesControlador.modificar_cliente-293"><a href="#ClientesControlador.modificar_cliente-293"><span class="linenos">293</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ClientesControlador.modificar_cliente-294"><a href="#ClientesControlador.modificar_cliente-294"><span class="linenos">294</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;Ocurrió un error al modificar el cliente.&quot;</span><span class="p">)</span>
</span></pre>
                </div>


                <div class="docstring">
                    <p>Permite actualizar los datos de un cliente ya registrado.</p>

                    <p>Valida el nuevo DNI si se cambia y comprueba posibles duplicados.
                        Valida el formato del correo electrónico.</p>
                </div>


            </div>
            <div id="ClientesControlador.eliminar_cliente" class="classattr">
                <input id="ClientesControlador.eliminar_cliente-view-source" class="view-source-toggle-state"
                    type="checkbox" aria-hidden="true" tabindex="-1">
                <div class="attr function">

                    <span class="def">def</span>
                    <span class="name">eliminar_cliente</span><span class="signature pdoc-code condensed">(<span
                            class="param"><span class="bp">self</span></span><span
                            class="return-annotation">):</span></span>

                    <label class="view-source-button" for="ClientesControlador.eliminar_cliente-view-source"><span>View
                            Source</span></label>

                </div>
                <a class="headerlink" href="#ClientesControlador.eliminar_cliente"></a>
                <div class="pdoc-code codehilite">
                    <pre><span></span><span id="ClientesControlador.eliminar_cliente-296"><a href="#ClientesControlador.eliminar_cliente-296"><span class="linenos">296</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">eliminar_cliente</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ClientesControlador.eliminar_cliente-297"><a href="#ClientesControlador.eliminar_cliente-297"><span class="linenos">297</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ClientesControlador.eliminar_cliente-298"><a href="#ClientesControlador.eliminar_cliente-298"><span class="linenos">298</span></a><span class="sd">        Solicita confirmación y elimina un cliente si es aceptado.</span>
</span><span id="ClientesControlador.eliminar_cliente-299"><a href="#ClientesControlador.eliminar_cliente-299"><span class="linenos">299</span></a>
</span><span id="ClientesControlador.eliminar_cliente-300"><a href="#ClientesControlador.eliminar_cliente-300"><span class="linenos">300</span></a><span class="sd">        No afecta a sus intervenciones o vehículos registrados.</span>
</span><span id="ClientesControlador.eliminar_cliente-301"><a href="#ClientesControlador.eliminar_cliente-301"><span class="linenos">301</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ClientesControlador.eliminar_cliente-302"><a href="#ClientesControlador.eliminar_cliente-302"><span class="linenos">302</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span><span class="p">:</span>
</span><span id="ClientesControlador.eliminar_cliente-303"><a href="#ClientesControlador.eliminar_cliente-303"><span class="linenos">303</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span>
</span><span id="ClientesControlador.eliminar_cliente-304"><a href="#ClientesControlador.eliminar_cliente-304"><span class="linenos">304</span></a>                <span class="s2">&quot;Primero debes seleccionar un cliente para eliminar.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.eliminar_cliente-305"><a href="#ClientesControlador.eliminar_cliente-305"><span class="linenos">305</span></a>            <span class="k">return</span>
</span><span id="ClientesControlador.eliminar_cliente-306"><a href="#ClientesControlador.eliminar_cliente-306"><span class="linenos">306</span></a>
</span><span id="ClientesControlador.eliminar_cliente-307"><a href="#ClientesControlador.eliminar_cliente-307"><span class="linenos">307</span></a>        <span class="n">confirmacion</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span>
</span><span id="ClientesControlador.eliminar_cliente-308"><a href="#ClientesControlador.eliminar_cliente-308"><span class="linenos">308</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="p">,</span>
</span><span id="ClientesControlador.eliminar_cliente-309"><a href="#ClientesControlador.eliminar_cliente-309"><span class="linenos">309</span></a>            <span class="s2">&quot;Confirmar eliminación&quot;</span><span class="p">,</span>
</span><span id="ClientesControlador.eliminar_cliente-310"><a href="#ClientesControlador.eliminar_cliente-310"><span class="linenos">310</span></a>            <span class="s2">&quot;¿Estás seguro de que deseas eliminar este cliente?</span><span class="se">\n</span><span class="s2">Esta acción no eliminará sus reparaciones ni vehículos.&quot;</span><span class="p">,</span>
</span><span id="ClientesControlador.eliminar_cliente-311"><a href="#ClientesControlador.eliminar_cliente-311"><span class="linenos">311</span></a>            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span>
</span><span id="ClientesControlador.eliminar_cliente-312"><a href="#ClientesControlador.eliminar_cliente-312"><span class="linenos">312</span></a>        <span class="p">)</span>
</span><span id="ClientesControlador.eliminar_cliente-313"><a href="#ClientesControlador.eliminar_cliente-313"><span class="linenos">313</span></a>
</span><span id="ClientesControlador.eliminar_cliente-314"><a href="#ClientesControlador.eliminar_cliente-314"><span class="linenos">314</span></a>        <span class="k">if</span> <span class="n">confirmacion</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
</span><span id="ClientesControlador.eliminar_cliente-315"><a href="#ClientesControlador.eliminar_cliente-315"><span class="linenos">315</span></a>            <span class="kn">from</span><span class="w"> </span><span class="nn">modelos.clientes_consultas</span><span class="w"> </span><span class="kn">import</span> <span class="n">eliminar_cliente_por_id</span>
</span><span id="ClientesControlador.eliminar_cliente-316"><a href="#ClientesControlador.eliminar_cliente-316"><span class="linenos">316</span></a>
</span><span id="ClientesControlador.eliminar_cliente-317"><a href="#ClientesControlador.eliminar_cliente-317"><span class="linenos">317</span></a>            <span class="n">exito</span> <span class="o">=</span> <span class="n">eliminar_cliente_por_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span><span class="p">)</span>
</span><span id="ClientesControlador.eliminar_cliente-318"><a href="#ClientesControlador.eliminar_cliente-318"><span class="linenos">318</span></a>            <span class="k">if</span> <span class="n">exito</span><span class="p">:</span>
</span><span id="ClientesControlador.eliminar_cliente-319"><a href="#ClientesControlador.eliminar_cliente-319"><span class="linenos">319</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_info</span><span class="p">(</span><span class="s2">&quot;Cliente eliminado correctamente.&quot;</span><span class="p">)</span>
</span><span id="ClientesControlador.eliminar_cliente-320"><a href="#ClientesControlador.eliminar_cliente-320"><span class="linenos">320</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">limpiar_campos</span><span class="p">()</span>
</span><span id="ClientesControlador.eliminar_cliente-321"><a href="#ClientesControlador.eliminar_cliente-321"><span class="linenos">321</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_nombre</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador.eliminar_cliente-322"><a href="#ClientesControlador.eliminar_cliente-322"><span class="linenos">322</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_dni</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador.eliminar_cliente-323"><a href="#ClientesControlador.eliminar_cliente-323"><span class="linenos">323</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">input_buscar_telefono</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ClientesControlador.eliminar_cliente-324"><a href="#ClientesControlador.eliminar_cliente-324"><span class="linenos">324</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_modificar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ClientesControlador.eliminar_cliente-325"><a href="#ClientesControlador.eliminar_cliente-325"><span class="linenos">325</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ventana</span><span class="o">.</span><span class="n">boton_eliminar</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ClientesControlador.eliminar_cliente-326"><a href="#ClientesControlador.eliminar_cliente-326"><span class="linenos">326</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">cliente_seleccionado_id</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ClientesControlador.eliminar_cliente-327"><a href="#ClientesControlador.eliminar_cliente-327"><span class="linenos">327</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">lista_clientes</span> <span class="o">=</span> <span class="n">obtener_todos_los_clientes</span><span class="p">()</span>
</span><span id="ClientesControlador.eliminar_cliente-328"><a href="#ClientesControlador.eliminar_cliente-328"><span class="linenos">328</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ClientesControlador.eliminar_cliente-329"><a href="#ClientesControlador.eliminar_cliente-329"><span class="linenos">329</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mostrar_error</span><span class="p">(</span><span class="s2">&quot;Error al eliminar el cliente.&quot;</span><span class="p">)</span>
</span></pre>
                </div>


                <div class="docstring">
                    <p>Solicita confirmación y elimina un cliente si es aceptado.</p>

                    <p>No afecta a sus intervenciones o vehículos registrados.</p>
                </div>


            </div>
            <div id="ClientesControlador.staticMetaObject" class="classattr">
                <div class="attr variable">
                    <span class="name">staticMetaObject</span> =
                    <span class="default_value">PySide6.QtCore.QMetaObject(&#34;ClientesControlador&#34; inherits
                        &#34;QObject&#34;:
                        )</span>


                </div>
                <a class="headerlink" href="#ClientesControlador.staticMetaObject"></a>



            </div>
        </section>
    </main>
    <script>
        function escapeHTML(html) {
            return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
        }

        const originalContent = document.querySelector("main.pdoc");
        let currentContent = originalContent;

        function setContent(innerHTML) {
            let elem;
            if (innerHTML) {
                elem = document.createElement("main");
                elem.classList.add("pdoc");
                elem.innerHTML = innerHTML;
            } else {
                elem = originalContent;
            }
            if (currentContent !== elem) {
                currentContent.replaceWith(elem);
                currentContent = elem;
            }
        }

        function getSearchTerm() {
            return (new URL(window.location)).searchParams.get("search");
        }

        const searchBox = document.querySelector(".pdoc input[type=search]");
        searchBox.addEventListener("input", function () {
            let url = new URL(window.location);
            if (searchBox.value.trim()) {
                url.hash = "";
                url.searchParams.set("search", searchBox.value);
            } else {
                url.searchParams.delete("search");
            }
            history.replaceState("", "", url.toString());
            onInput();
        });
        window.addEventListener("popstate", onInput);


        let search, searchErr;

        async function initialize() {
            try {
                search = await new Promise((resolve, reject) => {
                    const script = document.createElement("script");
                    script.type = "text/javascript";
                    script.async = true;
                    script.onload = () => resolve(window.pdocSearch);
                    script.onerror = (e) => reject(e);
                    script.src = "../search.js";
                    document.getElementsByTagName("head")[0].appendChild(script);
                });
            } catch (e) {
                console.error("Cannot fetch pdoc search index");
                searchErr = "Cannot fetch search index.";
            }
            onInput();

            document.querySelector("nav.pdoc").addEventListener("click", e => {
                if (e.target.hash) {
                    searchBox.value = "";
                    searchBox.dispatchEvent(new Event("input"));
                }
            });
        }

        function onInput() {
            setContent((() => {
                const term = getSearchTerm();
                if (!term) {
                    return null
                }
                if (searchErr) {
                    return `<h3>Error: ${searchErr}</h3>`
                }
                if (!search) {
                    return "<h3>Searching...</h3>"
                }

                window.scrollTo({ top: 0, left: 0, behavior: 'auto' });

                const results = search(term);

                let html;
                if (results.length === 0) {
                    html = `No search results for '${escapeHTML(term)}'.`
                } else {
                    html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
                }
                for (let result of results.slice(0, 10)) {
                    let doc = result.doc;
                    let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                    if (doc.qualname) {
                        url += `#${doc.qualname}`;
                    }

                    let heading;
                    switch (result.doc.kind) {
                        case "function":
                            if (doc.fullname.endsWith(".__init__")) {
                                heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                            } else {
                                heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                            }
                            break;
                        case "class":
                            heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                            if (doc.bases)
                                heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                            heading += `:`;
                            break;
                        case "variable":
                            heading = `<span class="name">${doc.fullname}</span>`;
                            if (doc.annotation)
                                heading += `<span class="annotation">${doc.annotation}</span>`;
                            if (doc.default_value)
                                heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                            break;
                        default:
                            heading = `<span class="name">${doc.fullname}</span>`;
                            break;
                    }
                    html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

                }
                return html;
            })());
        }

        if (getSearchTerm()) {
            initialize();
            searchBox.value = getSearchTerm();
            onInput();
        } else {
            searchBox.addEventListener("focus", initialize, { once: true });
        }

        searchBox.addEventListener("keydown", e => {
            if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
                let focused = currentContent.querySelector(".search-result.focused");
                if (!focused) {
                    currentContent.querySelector(".search-result").classList.add("focused");
                } else if (
                    e.key === "ArrowDown"
                    && focused.nextElementSibling
                    && focused.nextElementSibling.classList.contains("search-result")
                ) {
                    focused.classList.remove("focused");
                    focused.nextElementSibling.classList.add("focused");
                    focused.nextElementSibling.scrollIntoView({
                        behavior: "smooth",
                        block: "nearest",
                        inline: "nearest"
                    });
                } else if (
                    e.key === "ArrowUp"
                    && focused.previousElementSibling
                    && focused.previousElementSibling.classList.contains("search-result")
                ) {
                    focused.classList.remove("focused");
                    focused.previousElementSibling.classList.add("focused");
                    focused.previousElementSibling.scrollIntoView({
                        behavior: "smooth",
                        block: "nearest",
                        inline: "nearest"
                    });
                } else if (
                    e.key === "Enter"
                ) {
                    focused.querySelector("a").click();
                }
            }
        });
    </script>
</body>

</html>